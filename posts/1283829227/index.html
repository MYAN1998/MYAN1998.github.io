<!DOCTYPE html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>XCP协议指令 | MYAN's Blog</title><meta name=keywords content=XCP><meta name=author content=MYAN><meta name=copyright content=MYAN><meta name=format-detection content="telephone=no"><meta name=theme-color content=#ffffff><meta name=description content="XCP指令详解标准(STD)指令必实现指令0xFF:CONNECT 该命令与从设备建立一个连续的、逻辑的、点到点的连接设备。在运行XCP会话期间(已连接)，此命令不影响任何XCP从设备的配置。 从设备在非连接状态时不响应任何其他命令(除了自动检测) Mode参数  Mode&#x3D;0x00主机可以与从设备启动XCP通信 Mode&#x3D;0x01主机可以启动XCP通信同时告诉从机它应该进入一个特殊的(用户自定义"><meta property=og:type content=article><meta property=og:title content=XCP协议指令><meta property=og:url content=http://blog.myan.run/posts/1283829227/index.html><meta property=og:site_name content="MYAN&#39;s Blog"><meta property=og:description content="XCP指令详解标准(STD)指令必实现指令0xFF:CONNECT 该命令与从设备建立一个连续的、逻辑的、点到点的连接设备。在运行XCP会话期间(已连接)，此命令不影响任何XCP从设备的配置。 从设备在非连接状态时不响应任何其他命令(除了自动检测) Mode参数  Mode&#x3D;0x00主机可以与从设备启动XCP通信 Mode&#x3D;0x01主机可以启动XCP通信同时告诉从机它应该进入一个特殊的(用户自定义"><meta property=og:locale content=zh_CN><meta property=og:image content=https://imgs.myan.run/i/2023/01/02/nc5zdb-2.webp><meta property=article:published_time content=2023-12-25T00:00:00.000Z><meta property=article:modified_time content=2025-10-27T14:32:28.488Z><meta property=article:author content=MYAN><meta property=article:tag content=XCP标定协议><meta name=twitter:card content=summary><meta name=twitter:image content=https://imgs.myan.run/i/2023/01/02/nc5zdb-2.webp><link rel="shortcut icon" href=/img/favicon.png><link rel=canonical href=http://blog.myan.run/posts/1283829227/ ><link rel=preconnect href=//cdn.jsdelivr.net><link rel=preconnect href=//busuanzi.ibruce.info><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content=#b8d7ed><link rel=apple-touch-icon sizes=180x180 href=/img/siteicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/img/siteicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/siteicon/favicon-16x16.png><link rel=mask-icon href=/img/siteicon/safari-pinned-tab.svg color=#5bbad5><link rel=stylesheet href=/css/index.css><link rel=stylesheet href=https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css media=print onload='this.media="all"'><link rel=stylesheet href=https://npm.elemecdn.com/@fancyapps/ui/dist/fancybox.css media=print onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!0,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://npm.elemecdn.com/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://npm.elemecdn.com/flickr-justified-gallery/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1}</script><script id=config-diff>var GLOBAL_CONFIG_SITE={title:"XCP协议指令",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-10-27 14:32:28"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,n){if(0===n)return;const o=864e5*n,a={value:t,expiry:(new Date).getTime()+o};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const n=JSON.parse(t);if(!((new Date).getTime()>n.expiry))return n.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,n)=>{const o=document.createElement("script");o.src=e,o.async=!0,o.onerror=n,o.onload=o.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(o.onload=o.onreadystatechange=null,t())},document.head.appendChild(o)}));const t=saveToLocal.get("aside-status");void 0!==t&&("hide"===t?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=/css/rightMenu.css><link rel=stylesheet href=/css/meihua.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css><link rel=stylesheet href=/css/essay_page/essay_page.css><span id=fps></span><link rel=stylesheet href=https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css><link rel=stylesheet href=/css/about.css><script charset=UTF-8 id=LA_COLLECT src=//sdk.51.la/js-sdk-pro.min.js></script><script src=https://sdk.51.la/perf/js-sdk-perf.min.js crossorigin=anonymous></script><script>LA.init({id:"JxaiLq2sG6RTyMJi",ck:"JxaiLq2sG6RTyMJi"})</script><script>(new LingQue.Monitor).init({id:"JxakpP29OF5ppqo7",sendSuspicious:!0})</script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css><style>#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags:before{content:"\A";white-space:pre}#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags>.article-meta__separator{display:none}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css><link rel=stylesheet href=https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css media=print onload='this.media="all"'><link rel=stylesheet href=https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.cbd.int/hexo-butterfly-wowjs/lib/animate.min.css media=print onload='this.media="screen"'><link rel=stylesheet href=https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css media=defer onload='this.media="all"'><link rel=stylesheet href=https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css media=defer onload='this.media="all"'><script src=https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js></script><meta name=generator content="Hexo 6.2.0"></head><body><div id=loading-box><div class=loading-left-bg></div><div class=loading-right-bg></div><div class=spinner-box><div class=configure-border-1><div class=configure-core></div></div><div class=configure-border-2><div class=configure-core></div></div><div class=loading-word>加载中...</div></div></div><div id=web_bg></div><div id=sidebar><div id=menu-mask></div><div id=sidebar-menus><div class="avatar-img is-center"><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2022/07/31/dvpwnk.webp onerror='onerror=null,src="/img/friend_404.gif"' alt=avatar></div><div class="sidebar-site-data site-data is-center"><a href=/archives/ ><div class=headline>文章</div><div class=length-num>25</div></a><a href=/tags/ ><div class=headline>标签</div><div class=length-num>11</div></a><a href=/categories/ ><div class=headline>分类</div><div class=length-num>9</div></a></div><hr><div class=menus_items><div class=menus_item><a class="site-page faa-parent animated-hover" href=/ ><i class="fa-fw icon-tianchongzhuye"></i><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-tianchongzhuye></use></svg><span>首页</span></a></div><div class=menus_item><a class="site-page group faa-parent animated-hover" href=javascript:void(0);><svg class="icon hide" aria-hidden=true><use xlink:href=#icon-a-22></use></svg><span>目录</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/archives/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-shijian></use></svg><span>时间轴</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/tags/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-biaoqian></use></svg><span>标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/categories/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-fenlei></use></svg><span>分类</span></a></li></ul></div><div class=menus_item><a class="site-page group faa-parent animated-hover" href=javascript:void(0);><svg class="icon hide" aria-hidden=true><use xlink:href=#icon-shenghuoxiuxian></use></svg><span>休闲</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/Gallery/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-xiangce></use></svg><span>相册</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/music/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-yinle></use></svg><span>音乐</span></a></li></ul></div><div class=menus_item><a class="site-page group faa-parent animated-hover" href=javascript:void(0);><svg class="icon hide" aria-hidden=true><use xlink:href=#icon-shejiaoxinxi></use></svg><span>社交</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/link/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-zu10></use></svg><span>友链</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/comments/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-pinglun></use></svg><span>留言板</span></a></li></ul></div><div class=menus_item><a class="site-page group faa-parent animated-hover" href=javascript:void(0);><svg class="icon hide" aria-hidden=true><use xlink:href=#icon-gerenwendang></use></svg><span>个人</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/Diary/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-riji></use></svg><span>日记</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/essay/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-xinxi></use></svg><span>闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/about/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-guanyu></use></svg><span>关于</span></a></li></ul></div></div></div></div><div class=post id=body-wrap><header class=post-bg id=page-header style="background-image:url('https://imgs.myan.run/i/2023/01/02/nc5zdb-2.webp')"><nav id=nav><span id=blog_name><a id=site-name href=/ >MYAN's Blog</a></span><div id=menus><div id=nav-right><div id=search-button><a class="search faa-parent animated-hover" title=检索站内任何你想要的信息><svg class="faa-tada icon" style=height:24px;width:24px;fill:currentColor;position:relative;top:6px aria-hidden=true><use xlink:href=#icon-sousuo></use></svg></a></div><a class="meihua faa-parent animated-hover" onclick=toggleWinbox() title=美化设置-自定义你的风格 id=meihua-button><svg class="faa-tada icon" style=height:32px;width:32px;fill:currentColor;position:relative;top:8px aria-hidden=true><use xlink:href=#icon-tupian></use></svg></a><div class=menus_items><div class=menus_item><a class="site-page faa-parent animated-hover" href=/ ><i class="fa-fw icon-tianchongzhuye"></i><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-tianchongzhuye></use></svg><span>首页</span></a></div><div class=menus_item><a class="site-page group faa-parent animated-hover" href=javascript:void(0);><svg class="icon hide" aria-hidden=true><use xlink:href=#icon-a-22></use></svg><span>目录</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/archives/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-shijian></use></svg><span>时间轴</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/tags/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-biaoqian></use></svg><span>标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/categories/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-fenlei></use></svg><span>分类</span></a></li></ul></div><div class=menus_item><a class="site-page group faa-parent animated-hover" href=javascript:void(0);><svg class="icon hide" aria-hidden=true><use xlink:href=#icon-shenghuoxiuxian></use></svg><span>休闲</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/Gallery/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-xiangce></use></svg><span>相册</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/music/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-yinle></use></svg><span>音乐</span></a></li></ul></div><div class=menus_item><a class="site-page group faa-parent animated-hover" href=javascript:void(0);><svg class="icon hide" aria-hidden=true><use xlink:href=#icon-shejiaoxinxi></use></svg><span>社交</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/link/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-zu10></use></svg><span>友链</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/comments/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-pinglun></use></svg><span>留言板</span></a></li></ul></div><div class=menus_item><a class="site-page group faa-parent animated-hover" href=javascript:void(0);><svg class="icon hide" aria-hidden=true><use xlink:href=#icon-gerenwendang></use></svg><span>个人</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child faa-parent animated-hover" href=/Diary/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-riji></use></svg><span>日记</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/essay/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-xinxi></use></svg><span>闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href=/about/ ><svg class="icon faa-tada" aria-hidden=true><use xlink:href=#icon-guanyu></use></svg><span>关于</span></a></li></ul></div></div><div id=toggle-menu><a class=site-page><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id=post-info><h1 class=post-title>XCP协议指令</h1><div id=post-meta><div class=meta-firstline><span class=post-meta-date><svg class=post-meta-icon style=width:16px;height:16px;position:relative;top:5px><use xlink:href=#icon-rili></use></svg><span class=post-meta-label>发表于</span><time class=post-meta-date-created datetime=2023-12-25T00:00:00.000Z title="发表于 2023-12-25 00:00:00">2023-12-25</time><span class=post-meta-separator>|</span><svg class=post-meta-icon style=width:18px;height:18px;position:relative;top:5px><use xlink:href=#icon-gengxin></use></svg><span class=post-meta-label>更新于</span><time class=post-meta-date-updated datetime=2025-10-27T14:32:28.488Z title="更新于 2025-10-27 14:32:28">2025-10-27</time></span><span class=post-meta-categories><span class=post-meta-separator>|</span><svg class=post-meta-icon style=width:24px;height:24px;position:relative;top:5px><use xlink:href=#icon-biaoqian></use></svg><a class=post-meta-categories href=/categories/%E6%B1%BD%E8%BD%A6%E7%94%B5%E5%AD%90/ >汽车电子</a></span></div><div class=meta-secondline><span class=post-meta-separator>|</span><span class=post-meta-wordcount><svg class=post-meta-icon style=width:28px;height:28px;position:relative;top:5px><use xlink:href=#icon-charuword></use></svg><span class=post-meta-label>字数总计:</span><span class=word-count>9.5k</span><span class=post-meta-separator>|</span><svg class=post-meta-icon style=width:30px;height:30px;position:relative;top:5px><use xlink:href=#icon-shizhong></use></svg><span class=post-meta-label>阅读时长:</span><span>33分钟</span></span><span class=post-meta-separator>|</span><span class=post-meta-pv-cv data-flag-title=XCP协议指令><svg class=post-meta-icon style=width:24px;height:24px;position:relative;top:5px><use xlink:href=#icon-eye></use></svg><span class=post-meta-label>阅读量:</span><span id=busuanzi_value_page_pv><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class=layout id=content-inner><div id=post><article class=post-content id=article-container><h2 id=XCP指令详解><a href=#XCP指令详解 class=headerlink title=XCP指令详解></a>XCP指令详解</h2><h3 id=标准-STD-指令><a href=#标准-STD-指令 class=headerlink title=标准(STD)指令></a>标准(STD)指令</h3><h3 id=必实现指令><a href=#必实现指令 class=headerlink title=必实现指令></a>必实现指令</h3><h4 id=0xFF-CONNECT><a href=#0xFF-CONNECT class=headerlink title=0xFF:CONNECT></a>0xFF:CONNECT</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xe8nkr-2.webp alt=CONNECT></p><p>该命令与从设备建立一个连续的、逻辑的、点到点的连接设备。在运行XCP会话期间(已连接)，此命令不影响任何XCP从设备的配置。 从设备在非连接状态时不响应任何其他命令(除了自动检测)</p><p>Mode参数</p><ul><li>Mode=0x00主机可以与从设备启动XCP通信</li><li>Mode=0x01主机可以启动XCP通信同时告诉从机它应该进入一个特殊的(用户自定义的)模式</li></ul><p>RESSOURCE参数</p><ul><li>CAL/PAG、DAQ、STIM、PGM = 1 表示该资源可用，反之不可用</li></ul><p>COMM_MODE参数</p><ul><li><p>ADDRESS_GRANULARITY_1、ADDRESS_GRANULARITY_0</p><ul><li>00： ADDRESS_GRANULARITY=BYTE AG=1字节</li><li>01： ADDRESS_GRANULARITY=WORE AG=2字节</li><li>10： ADDRESS_GRANULARITY=DWORD AG=4字节</li><li>11： ADDRESS_GRANULARITY=保留 AG=保留</li></ul></li><li><p>SLAVE_BLOCK_MODE参数</p><ul><li>1：表示从机块模式可用</li><li>0：表示从机块模式不可用</li></ul></li><li><p>OPTIONAL参数：</p><ul><li>1：表示支持类型的附加信息的通信模式</li><li>0：表示不支持类型的附加信息的通信模式</li></ul></li><li><p>MAX_CTO参数：</p><ul><li>最大CTO大小，单位为字节</li></ul></li><li><p>MAX_DTO参数：</p><ul><li>最大DTO大小，单位为字节</li></ul></li></ul><blockquote><p>注意：MAX_CTO、MAX_CTO必须始终满足下列关系： MAX_CTO mod AG = 0 MAX_DTO mod AG = 0 所有涉及从设备地址范围的长度信息都基于AG(元素)。 如果长度信息指的是数据流(XCP协议)，则它是基于字节</p></blockquote><figure class="highlight txt"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line>FF 05 41 08 00 08 01 01</span><br><span class=line>05:表示DAQ以及CAL/PAG(标定)可用;STIM、PGM(编程)不可用</span><br><span class=line>41:表示SLAVE_BLOCK_MODE=1,从机可用;ADDRESS_GRANULARITY_1=0,ADDRESS_GRANULARITY_0=0,表示ADDRESS_GRANULARITY=BYTE即AG=1;byteOrder=1,表示MOTOROLA类型</span><br><span class=line>08:表示CTO最大字节为8</span><br><span class=line>0008:表示DTO最大字节为8</span><br><span class=line>01:XCP Protocol Layer Version</span><br><span class=line>01:XCP Transport Layer Version</span><br></pre></td></tr></table></figure><h4 id=0XFE-DISCONNECT><a href=#0XFE-DISCONNECT class=headerlink title=0XFE:DISCONNECT></a>0XFE:DISCONNECT</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xkph1w-2.webp alt=DISCONNECT></p><h4 id=OXFD-GET-STATUS><a href=#OXFD-GET-STATUS class=headerlink title=OXFD:GET_STATUS></a>OXFD:GET_STATUS</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xkqyag-2.webp alt=GET_STATUS></p><p>Session参数：</p><ul><li>STORE_CAL_REQ：STORE_CAL_REQ = 1标志表示保存校准数据到非易失性内存的挂起请求。一旦请求被满足，从设备将重置该位。从设备可以通过传输EV_STORE_CAL来指示</li><li>STORE_DAQ_REQ：STORE_DAQ_REQ = 1标志表示保存DAQ列表设置到非易失性内存的挂起请求。一旦请求被满足，从设备将重置该位。从设备可以通过传输EV_STORE_DAQ来指示</li><li>CLEAR_DAQ_REQ：CLEAR_DAQ_REQ = 1标志表示清除所有非易失中DAQ列表的挂起请求。所有ODT表项重置为address = 0, extension = 0, size = 0, bit_offset = FF。会话配置ID重置为0。一旦请求得到满足，从设备将重置该位。从设备可以通过发送信号EV_CLEAR_DAQ来指示。 如果从设备不支持所请求的模式，返回ERR_OUT_OF_RANGE</li><li>DAQ_RUNNING=1：表示至少有一个DAQ列表已经启动并处于状态运行模式</li><li>RESUME=1：表示从机处于RESUME模式</li></ul><p>Protection参数：</p><p>表示当前有哪些CMD是被SEED&amp;KEY锁着的。在XCP中，有一种保护机制叫做SEED&amp;KEY保护机制，按照功能具体分成了CAL/PAG，DAQ，STIM，PGM四类</p><p>每一类都有一套单独的SEED&amp;KEY机制（算法也可以不同），需要单独解锁，只有使用GET_SEED和UNLOCK进行解锁后，然后才能发送其相对应的CMD</p><ul><li>CAL/PAG：CAL/PAG = 1 表示该资源受保护需要解锁才能使用</li><li>DAQ：DAQ = 1 表示该资源受保护需要解锁才能使用</li><li>STIM：STIM = 1 表示该资源受保护需要解锁才能使用</li><li>PGM：PGM = 1 表示该资源受保护需要解锁才能使用</li></ul><blockquote><p>标准命令永远不会被保护</p></blockquote><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line>FF 20 00 00 00 00 00 00</span><br><span class=line>20:源码表示ECU connect</span><br><span class=line>   RESUME=0,DAQ_RUNNING=0,STORE_CAL_REQ=0,STORE_DAQ_REQ=0,CLEAR_DAQ_REQ=0</span><br><span class=line>00:CAL/PAG = 0,DAQ = 0,STIM = 0,PGM = 0,均不受保护,无需解锁 </span><br></pre></td></tr></table></figure><h4 id=0xFC-SYNCH><a href=#0xFC-SYNCH class=headerlink title=0xFC:SYNCH></a>0xFC:SYNCH</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xkt3b1-2.webp alt=SYNCH></p><p>该命令用于同步超时后的命令执行，SYNCH命令将始终有一个带有错误代码的否定响应ERR_CMD_SYNCH。没有其他命令使用此错误代码</p><h3 id=可选指令><a href=#可选指令 class=headerlink title=可选指令></a>可选指令</h3><h4 id=0XFB-GET-COMM-MODE-INFO><a href=#0XFB-GET-COMM-MODE-INFO class=headerlink title=0XFB:GET_COMM_MODE_INFO></a>0XFB:GET_COMM_MODE_INFO</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xkukwg-2.webp alt=GET_COMM_MODE_INFO></p><p>COMM_MODE参数：</p><ul><li>MASTER_BLOCK_MODE参数：表示主设备的块模式是否可用。如果支持主设备块模式则MAX_BS为允许的最大块大小作为连续命令包的数量(DOWNLOAD_NEXT或PROGRAM_NEXT)</li><li>MIN_ST所需的最小值，是一个块的数据包从主设备传输到从设备的分离时间，单位为100微秒</li><li>INTERLEAVED_MODE参数：表示交错模式是否可用。如果存在交错模式QUEUE_SIZE为最大数目。主站可以向从站的接收队列发送连续的命令</li></ul><figure class="highlight txt"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>FF 00 01 00 FF 01 00 11</span><br><span class=line>00:保留</span><br><span class=line>01:主设备的块模式可用,交错模式不可用</span><br><span class=line>00:保留</span><br><span class=line>FF:MAX_BS为允许的最大块大小256字节作为连续命令包的数量</span><br><span class=line>01:一个块的数据包从主设备传输到从设备的分离时间,单位为100微秒</span><br><span class=line>00:交错模的最大数目</span><br><span class=line>11:XCP驱动版本号</span><br></pre></td></tr></table></figure><h4 id=0xFA-GET-ID><a href=#0xFA-GET-ID class=headerlink title=0xFA:GET_ID></a>0xFA:GET_ID</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xkw6zq-2.webp alt=GET_ID></p><p>Type参数：</p><ul><li>0：ASCII文本</li><li>1：ASAM-MC2文件名，没有路径和扩展</li><li>2：ASAM-MC2文件名，有路径和扩展</li><li>3：ASAM-MC2文件所在的URL路径</li><li>4：ASAM-MC2文件上传</li><li>128-255：自定义</li></ul><p>Length参数：</p><ul><li>指定标识中的字节数。如果length为0，则请求的标识类型不可用</li><li>数据元素是BYTE, WORD或DWORD，取决于AG</li><li>Mode=0时，从设备将MTA (Memory Transfer Address)设置为当前地址。主设备可以使用一个或多个UPLOAD命</li><li>标识字符串是ASCII文本格式，它没有0结尾</li></ul><h4 id=0XF9-SET-REQUEST><a href=#0XF9-SET-REQUEST class=headerlink title=0XF9:SET_REQUEST></a>0XF9:SET_REQUEST</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xkxur7-2.webp alt=SET_REQUEST></p><p>Mode参数：</p><ul><li>STORE_CAL_REQ：标记了将校准数据保存到非易失性内存中的请求。可以通过GET_STATUS获取的STORE_CAL_REQ位，该位将被从机重置当请求已完成。从设备可以通过传输EV_STORE_CAL来指示传输</li><li>STORE_DAQ_REQ：标记了一个保存所有DAQ列表的请求。目标是START_STOP_DAQ_LIST指令选择的非易失性内存。从设备还必须存储非易失性内存中的会话配置id。在保存时，从设备首先必须清除可能已经存在的任何DAQ列表配置。可以通过GET_STATUS获得的STORE_DAQ_REQ位，该位将被从机重置当请求已完成。从设备可以通过传输EV_STORE_DAQ来指示传输</li><li>CLEAR_DAQ_REQ用于清除非易失性内存中的所有DAQ列表。所有ODT条目reset address = 0, extension = 0, size = 0, bit_offset = FF，会话配置ID重置为0。通过GET_STATUS获得的CLEAR_DAQ_REQ位，该位将被从机重置当请求已完成。从设备可以通过传输EV_CLEAR_DAQ来指示</li></ul><blockquote><p>如果从设备不支持所请求的模式，则返回ERR_OUT_OF_RANGE</p></blockquote><h4 id=0xF8-GET-SEED><a href=#0xF8-GET-SEED class=headerlink title=0xF8:GET_SEED></a>0xF8:GET_SEED</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xl7q67-2.webp alt=GET_SEED></p><p>Mode参数：</p><ul><li>Mode=0：第一部分种子获取</li><li>Mode=1：剩余种子获取</li></ul><p>Resource参数：</p><ul><li>Mode=0：Resource=需要解锁的资源</li><li>Mode=1：Resource不关心</li></ul><blockquote><p>主设备必须在定义的顺序中使用GET_SEED(Mode=1)和GET_SEED(Mode= 0)。 如果主设备直接发送GET_SEED(Mode=1)，而不在之前使用GET_SEED(Mode=0)，从服务器返回一个ERR_SEQUENCE为负响应</p></blockquote><p>Resource参数：</p><ul><li>请参阅GET_STATUS(资源保护状态)命令</li></ul><blockquote><p>一个GET_SEED命令只能请求一个资源。如果不止一个资源必须被解锁，(GET_SEED+UNLOCK)序列必须执行多次。主服务器不请求任何资源或请求多个资源，从机将响应ERR_OUT_OF_RANGE</p></blockquote><h4 id=0XF7-UNLOCK><a href=#0XF7-UNLOCK class=headerlink title=0XF7:UNLOCK></a>0XF7:UNLOCK</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xl97jq-2.webp alt=UNLOCK></p><p>使用种子算的密钥来解锁从机的安全保护。种子由之前的GET_SEED序列获得。</p><p>Length参数:</p><ul><li>表示剩余密钥字节数</li><li>主机必须在定义的序列中使用UNLOCK和GET_SEED。如果之前只有一个GET_SEED，主服务器只能发送一个UNLOCK序列</li><li>如果密钥的总长度大于MAX_CTO-2，主服务器必须发送剩余的密钥字节，连续的UNLOCK命令包含剩余的键的长度</li></ul><blockquote><p>如果主服务器不尊重这个序列，从服务器返回ERR_SEQUENCE为负响应。 完成UNLOCK序列后检查密钥。如果钥匙不被接受，将返回ERR_ACCESS_LOCKED。从设备将转到断开连接状态。使用正确的密钥重复UNLOCK序列将会有一个积极的响应，没有其他影响</p></blockquote><p>Example: MAX_CTO = 8 bytes (CAN) Seed = 11 22 33 44<br>TotalLengthOf(seed) = 4 bytes Key = 43 21<br>TotalLengthOf(key) = 2 bytes</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xlamz6-2.webp alt=UNLOCK_Example></p><p>MAX_CTO = 8 bytes (CAN) Seed = 99 88 77 66 55 44 33 22 11 00 11 22 33 44 55 66 77 88 99<br>TotalLengthOf(seed) = 19 bytes Key = 98 76 54 32 10 01 23 45 67 89<br>TotalLengthOf(key) = 10 bytes</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xlc8sy-2.webp alt=UNLOCK_Example2></p><h4 id=0xF6-SET-MTA><a href=#0xF6-SET-MTA class=headerlink title=0xF6:SET_MTA></a>0xF6:SET_MTA</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xle7rb-2.webp alt=SET_MTA></p><p>这个命令将内存初始化一个指针(32位地址+ 8位扩展)转移指令</p><blockquote><p>MTA用于命令BUILD_CHECKSUM, UPLOAD, DOWNLOAD，DOWNLOAD_MAX, MODIFY_BITS, PROGRAM_CLEAR，PROGRAM和PROGRAM_MAX</p></blockquote><h4 id=0xF5-UPLOAD><a href=#0xF5-UPLOAD class=headerlink title=0xF5:UPLOAD></a>0xF5:UPLOAD</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xlff2n-2.webp alt=UPLOAD></p><p>从当前MTA开始，将返回指定长度的数据块。MTA将按给定的数据元素数量后递增</p><ul><li>根据AG的不同，必须使用1、2或3个对齐字节来满足对齐要求</li><li>元素是BYTE、WORD或DWORD，取决于AG</li></ul><p>如果从机不支持块传输模式</p><ul><li>则所有上传的数据都以单个响应包方式传输，因此请求中的数据元素数量参数必须在[1..MAX_CTO-1]范围内</li><li>如果数据元素个数大于MAX_CTO-1，返回ERR_OUT_OF_RANGE</li></ul><p>如果支持块传输方式</p><ul><li>则上传的数据在多个响应中传输在同一个请求包上</li><li>对于master，不允许有任何限制最大块大小。因此数据元素的数量(n)可以在此范围内(1 . . 255)</li><li>从设备将发送(n*AG / (MAX_CTO-1)) +1个响应报文。响应包之间的分离时间取决于从设备实现</li></ul><p>Examples: MAX_CTO=8<br>AG=1</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xlgxn1-2.webp alt=UPLOAD_Examples></p><h4 id=0xF4-SHORT-UPLOAD><a href=#0xF4-SHORT-UPLOAD class=headerlink title=0xF4:SHORT_UPLOAD></a>0xF4:SHORT_UPLOAD</h4><p>将返回指定长度的数据块，从Address开始。MTA指针为设置为上传数据块后面的第一个数据字节。错误处理和响应结构与UPLOAD命令相同</p><blockquote><p>元素是字节。WORD或DWORD，取决于AG。 此命令不支持块传输，且不能在块传输序列中使用。</p></blockquote><h4 id=0xF3-BUILD-CHECKSUM><a href=#0xF3-BUILD-CHECKSUM class=headerlink title=0xF3:BUILD_CHECKSUM></a>0xF3:BUILD_CHECKSUM</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xlj0jl-2.webp alt=BUILD_CHECKSUM></p><p>返回由MTA和定义的内存块大小的计算校验和结果。MTA将按大小后增量</p><p>Type参数：</p><ul><li>0x01: XCP_ADD_11 将BYTE添加到BYTE校验和中，忽略溢出</li><li>0x02: XCP_ADD_12 将BYTE添加到WORD校验和中，忽略溢出</li><li>0x03: XCP_ADD_14 将BYTE添加到DWORD校验和中，忽略溢出</li><li>0x04: XCP_ADD_22 将WORD添加到WORD校验和中，忽略溢出，块大小必须对2取模</li><li>0x05: XCP_ADD_24 将WORD添加到DWORD校验和中，忽略溢出，块大小必须对2取模</li><li>0x06: XCP_ADD_44 将DWORD添加到DWORD校验和中，忽略溢出，块大小必须对4取模</li><li>0x07: XCP_CRC_16 参见CRC错误检测算法</li><li>0x08: XCP_CRC_16_CITT 参见CRC错误检测算法</li><li>0x09: XCP_CRC_32 参见CRC错误检测算法</li><li>0xFF: XCP_USER_DEFINED 用户自定义算法，在外部计算函数</li></ul><blockquote><p>不管校验和类型是什么，结果总是以DWORD形式给出。 使用校验和类型XCP_USER_DEFINED时，从设备可以指示主设备为了计算校验和，必须使用在外部计算函数(例如win32 DLL, UNIX共享目标文件)，对象获取的名称在此从机的外部函数文件中</p></blockquote><p>如果块大小超过允许的最大值，则返回ERR_OUT_OF_RANGE。最大块大小将在校验和字段中返回</p><p>CRC算法：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xltx6g-2.webp alt=CRC></p><h4 id=0xF2-TRANSPORT-LAYER-CMD><a href=#0xF2-TRANSPORT-LAYER-CMD class=headerlink title=0xF2:TRANSPORT_LAYER_CMD></a>0xF2:TRANSPORT_LAYER_CMD</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xlv925-2.webp alt=TRANSPORT_LAYER_CMD></p><p>该命令在传输层规范中定义。它用于执行传输层特定的动作</p><h4 id=0xF1-USER-CMD><a href=#0xF1-USER-CMD class=headerlink title=0xF1:USER_CMD></a>0xF1:USER_CMD</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xlwauf-2.webp alt=USER_CMD></p><p>该命令由用户自定义。它不是必须被用来实现其他功能服务</p><h3 id=标定-CAL-指令><a href=#标定-CAL-指令 class=headerlink title=标定(CAL)指令></a>标定(CAL)指令</h3><h3 id=必实现指令-1><a href=#必实现指令-1 class=headerlink title=必实现指令></a>必实现指令</h3><h4 id=0xF0-DOWNLOAD><a href=#0xF0-DOWNLOAD class=headerlink title=0xF0:DOWNLOAD></a>0xF0:DOWNLOAD</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xlyb7w-2.webp alt=DOWNLOAD></p><blockquote><p>如果AG = DWORD，则必须使用2个对齐字节以满足对齐要求。 元素是BYTE，WORD或DWORD取决于AG</p></blockquote><p>CMD中包含的指定长度(大小)的数据块从MTA开始将被复制到内存，MTA将按数据数量后增加</p><p>如果从机不支持块传输模式</p><ul><li>则下载的所有数据都是单个命令包中传输。因此，数据元素的数量参数请求中的值必须在[1..MAX_CTO-2]范围内。如果数据元素个数大于MAX_CTO-2，则返回ERR_OUT_OF_RANGE</li></ul><p>如果从机支持块传输模式</p><ul><li>则下载的数据将分多个传输命令数据包。对于从设备，可能存在关于最大连续命令包(MAX_BS)。因此数据元素个数(n)的取值范围为[1..min(MAX_BS<em>(MAX_CTO-2)/AG,255)]。主设备必须连续传输(n</em>AG / (MAX_CTO-2)) - 1个DOWNLOAD_NEXT命令包。从设备将只回复最后DOWNLOAD_NEXT命令包。命令包之间的分离时间在CONNECT的响应中指定最大数据包数(MAX_BS, MIN_ST)</li></ul><p>Example: MAX_CTO=8</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xlzhgf-2.webp alt=DOWNLOAD></p><h3 id=可选实现指令><a href=#可选实现指令 class=headerlink title=可选实现指令></a>可选实现指令</h3><h4 id=0xEF-DOWNLOAD-NEXT><a href=#0xEF-DOWNLOAD-NEXT class=headerlink title=0xEF:DOWNLOAD_NEXT></a>0xEF:DOWNLOAD_NEXT</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xm0nvl-2.webp alt=DOWNLOAD_NEXT></p><blockquote><p>如果AG = DWORD，则必须使用2个对齐字节以满足对齐要求。 元素是BYTE，WORD或DWORD取决于AG</p></blockquote><ul><li>该命令用于为DOWNLOAD传输连续的数据元素命令</li><li>DOWNLOAD_NEXT命令的结构与DOWNLOAD完全相同命令</li><li>Number包含要传输的剩余数量的数据元素</li><li>从设备将使用此信息检测丢失的数据包。如果检测到序列错误，则将返回错误代码ERR_SEQUENCE</li><li>如果数据元素的数量与期望值不匹配，则错误将返回ERR_SEQUENCE。回应将包含预期的数据元素数量</li></ul><p>Example: MAX_CTO=8</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xm20u3-2.webp alt=DOWNLOAD_NEXT_Example></p><h4 id=0xEE-DOWNLOAD-MAX><a href=#0xEE-DOWNLOAD-MAX class=headerlink title=0xEE:DOWNLOAD_MAX></a>0xEE:DOWNLOAD_MAX</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xm36wu-2.webp alt=DOWNLOAD_MAX></p><blockquote><p>如果AG = WORD/DWORD，则必须使用1/3个对齐字节以满足对齐要求。 元素是BYTE，WORD或DWORD取决于AG。 此命令不支持块传输，并且不能块传输序列中使用</p></blockquote><p>将被下载数据到内存中，从MTA开始。MTA将增加MAX_CTO / AG-1</p><h4 id=0xED-SHORT-DOWNLOAD><a href=#0xED-SHORT-DOWNLOAD class=headerlink title=0xED:SHORT_DOWNLOAD></a>0xED:SHORT_DOWNLOAD</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xm47m8-2.webp alt=SHORT_DOWNLOAD></p><blockquote><p>元素是BYTE，WORD或DWORD取决于AG。 此命令不支持块传输，并且不能块传输序列中使用。 该命令将没有效果(没有数据字节可以传输)，如果MAX_CTO = 8</p></blockquote><p>从Address开始写入指定长度的数据块。MTA指针设置为第一个数据元素。如果是元素个数超过(MAX_CTO-8)/AG，则返回错误码ERR_OUT_OF_RANGE</p><h4 id=0xEC-MODIFY-BITS><a href=#0xEC-MODIFY-BITS class=headerlink title=0xEC:MODIFY_BITS></a>0xEC:MODIFY_BITS</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xmer72-2.webp alt=MODIFY_BITS></p><p>A = ( (A) &amp; ((~((dword)(((word)~MA)&lt;&lt;S))) )^((dword)(MX&lt;&lt;S)) )</p><blockquote><p>MTA不会受到影响</p></blockquote><p>Example:</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xmfy8u-2.webp alt=MODIFY_BITS_Example></p><h3 id=页面切换-PAG-指令><a href=#页面切换-PAG-指令 class=headerlink title=页面切换(PAG)指令></a>页面切换(PAG)指令</h3><h3 id=必实现指令-2><a href=#必实现指令-2 class=headerlink title=必实现指令></a>必实现指令</h3><h4 id=0xEB-SET-CAL-PAGE><a href=#0xEB-SET-CAL-PAGE class=headerlink title=0xEB:SET_CAL_PAGE></a>0xEB:SET_CAL_PAGE</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xmh3me-2.webp alt=SET_CAL_PAGE></p><p>Mode参数：</p><ul><li>ECU：给定的页面将使用从机的设备应用</li><li>XCP：从设备XCP驱动将访问给定的页面</li><li>ALL：逻辑段号被忽略。该命令适用于所有段</li><li>ECU和XCP标志可以同时设置，也可以单独设置</li><li>如果校准数据页不能设置为给定的模式，则返回ERR_MODE_NOT_VALID</li><li>如果校准数据页不可用，则返回ERR_PAGE_NOT_VALID或ERR_SEGMENT_NOT_VALID</li></ul><h4 id=0xEA-GET-CAL-PAGE><a href=#0xEA-GET-CAL-PAGE class=headerlink title=0xEA:GET_CAL_PAGE></a>0xEA:GET_CAL_PAGE</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xmidkd-2.webp alt=GET_CAL_PAGE></p><p>此命令返回当前激活的逻辑编号指定的访问模式的数据段的校准数据页。模式可以是0x01 (ECU)或0x02 (XCP)。所有其他值无效</p><h3 id=可选实现命令><a href=#可选实现命令 class=headerlink title=可选实现命令></a>可选实现命令</h3><h4 id=0xE9-GET-PAG-PROCESSOR-INFO><a href=#0xE9-GET-PAG-PROCESSOR-INFO class=headerlink title=0xE9:GET_PAG_PROCESSOR_INFO></a>0xE9:GET_PAG_PROCESSOR_INFO</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xmjzng-2.webp alt=GET_PAG_PROCESSOR_INFO></p><p>PROPERTIES参数：</p><ul><li>FREEZE=1：段可以设置为冻结模式。反之不能设置为冻结模式</li></ul><h4 id=0xE8-GET-SEGMENT-INFO><a href=#0xE8-GET-SEGMENT-INFO class=headerlink title=0xE8:GET_SEGMENT_INFO></a>0xE8:GET_SEGMENT_INFO</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xmlowh-2.webp alt=GET_SEGMENT_INFO></p><p>Mode参数：</p><ul><li>0 ：获取此段的基本地址信息</li><li>1 ：获取该分段的标准信息</li><li>2 ：获取这个SEGMENT的地址映射信息</li></ul><p>INFO参数：</p><ul><li>Mode=0：INFO=0：地址</li><li>Mode=0：INFO=1：长度</li><li>Mode=1：INFO参数不关心</li><li>Mode=2：INFO=0：源地址</li><li>Mode=2：INFO=1：目标地址</li><li>Mode=2：INFO=2：地址长度</li></ul><p>INDEX参数：</p><ul><li>Mode=0：INDEX参数不关心</li><li>Mode=1：INDEX参数不关心</li><li>Mode=2：INDEX：MAPPING_INFO所属的地址映射范围标识符</li></ul><p>GET_SEGMENT_INFO返回特定SEGMENT的信息。如果指定的SEGMENT不可用，则返回ERR_OUT_OF_RANGE</p><p>返回指令(Mode = 0)：</p><ul><li>响应包含这个SEGMENT的地址信息</li><li>如果SEGMENT_INFO = 0，该命令将在BASIC_INFO中返回该SEGMENT的地址</li><li>如果SEGMENT_INFO = 1，该命令将在BASIC_INFO中返回该SEGMENT的长度</li></ul><p>返回指令(Mode = 1)：</p><ul><li>响应包含关于这个SEGMENT的标准信息</li><li>MAX_PAGES：表示该SEGMENT可用的page数量</li><li>EXTENSION用于SET_MTA, SHORT_UPLOAD和SHORT_DOWNLOAD访问该SEGMENT内的PAGE时</li><li>MAX_MAPPING：表示该SEGMENT内地址范围的数量应用地址映射</li></ul><p>返回指令(Mode = 2)：</p><ul><li>如果Mode = 2, SEGMENT_INFO表示所请求的映射信息在MAPPING_INDEX的范围</li><li>如果SEGMENT_INFO = 0，该命令将返回MAPPING_INFO中MAPPING_INDEX的源地址</li><li>如果SEGMENT_INFO = 1，该命令将返回MAPPING_INFO中MAPPING_INDEX的目的地址</li><li>如果SEGMENT_INFO = 2，该命令将返回MAPPING_INFO中MAPPING_INDEX的长度</li></ul><h4 id=0xE7-GET-PAGE-INFO><a href=#0xE7-GET-PAGE-INFO class=headerlink title=0xE7:GET_PAGE_INFO></a>0xE7:GET_PAGE_INFO</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xmmzac-2.webp alt=GET_PAGE_INFO></p><p>GET_PAGE_INFO返回特定PAGE的信息。如果指定的PAGE不可用，则返回ERR_OUT_OF_RANGE</p><p>PROPERTIES参数：</p><ul><li>ECU_ACCESS_x：标志表示ECU是否以及如何访问该页</li><li>ECU_ACCESS_WITH_XCP、ECU_ACCESS_WITHOUT_XCP = 00：不允许访问ECU</li><li>ECU_ACCESS_WITH_XCP、ECU_ACCESS_WITHOUT_XCP = 01：没有XCP</li><li><p>ECU_ACCESS_WITH_XCP、ECU_ACCESS_WITHOUT_XCP = 10：只有XCP</p></li><li><p>ECU_ACCESS_WITH_XCP、ECU_ACCESS_WITHOUT_XCP = 11：不关心</p></li><li>XCP_READ_ACCESS_x：标志表示XCP主机可以访问这个页面</li><li>XCP_READ_ACCESS_WITH_ECU、XCP_READ_ACCESS_WITHOUT_ECU = 00：不允许XCP读访问</li><li>XCP_READ_ACCESS_WITH_ECU、XCP_READ_ACCESS_WITHOUT_ECU = 01：没有ECU</li><li>XCP_READ_ACCESS_WITH_ECU、XCP_READ_ACCESS_WITHOUT_ECU = 10：只有ECU</li><li>XCP_READ_ACCESS_WITH_ECU、XCP_READ_ACCESS_WITHOUT_ECU = 11：不关心</li><li>XCP_WRITE_ACCESS_x：标志表示XCP主机可以写入这个页面</li><li>XCP_WRITE_ACCESS_WITH_ECU、XCP_WRITE_ACCESS_WITHOUT_ECU = 00：不允许XCP写访问</li><li>XCP_WRITE_ACCESS_WITH_ECU、XCP_WRITE_ACCESS_WITHOUT_ECU = 01：没有ECU</li><li>XCP_WRITE_ACCESS_WITH_ECU、XCP_WRITE_ACCESS_WITHOUT_ECU = 10：只有ECU</li><li>XCP_WRITE_ACCESS_WITH_ECU、XCP_WRITE_ACCESS_WITHOUT_ECU = 11：不关心</li></ul><h4 id=0xE6-SET-SEGMENT-MODE><a href=#0xE6-SET-SEGMENT-MODE class=headerlink title=0xE6:SET_SEGMENT_MODE></a>0xE6:SET_SEGMENT_MODE</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xmomtv-2.webp alt=SET_SEGMENT_MODE></p><p>如果指定的SEGMENT不可用，则返回ERR_OUT_OF_RANGE</p><p>Mode参数：</p><ul><li>FREEZE=1： 使能冻结模式。反之关闭冻结模式</li></ul><h4 id=0xE5-GET-SEGMENT-MODE><a href=#0xE5-GET-SEGMENT-MODE class=headerlink title=0xE5:GET_SEGMENT_MODE></a>0xE5:GET_SEGMENT_MODE</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xmq70p-2.webp alt=GET_SEGMENT_MODE></p><p>如果指定的SEGMENT不可用，则返回ERR_OUT_OF_RANGE</p><h4 id=0xE4-COPY-CAL-PAGE><a href=#0xE4-COPY-CAL-PAGE class=headerlink title=0xE4:COPY_CAL_PAGE></a>0xE4:COPY_CAL_PAGE</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xmzqut-2.webp alt=COPY_CAL_PAGE></p><ul><li>该命令强制从机将一个校准页复制到另一个校准页。此命令仅在定义了多个校准页时可用</li><li>原则上，任何段的任何页都可以复制到任何段的任何页</li><li>如果校准数据页不能复制到给定的目的地，例如，由于目标是一个flash段，则返回ERR_WRITE_PROTECTED</li><li>如果校准数据页不可用，则返回ERR_PAGE_NOT_VALID或ERR_SEGMENT_NOT_VALID</li></ul><h3 id=数据采集-DAQ-指令-静态><a href=#数据采集-DAQ-指令-静态 class=headerlink title=数据采集(DAQ)指令(静态)></a>数据采集(DAQ)指令(静态)</h3><h3 id=必实现指令-3><a href=#必实现指令-3 class=headerlink title=必实现指令></a>必实现指令</h3><h4 id=0xE3-CLEAR-DAQ-LIST><a href=#0xE3-CLEAR-DAQ-LIST class=headerlink title=0xE3:CLEAR_DAQ_LIST></a>0xE3:CLEAR_DAQ_LIST</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xn13dw-2.webp alt=CLEAR_DAQ_LIST></p><ul><li><p>此命令可用于预定义的和可配置的DAQ列表，因此范围DAQ_LIST_NUMBER是[0,1，..MAX_DAQ-1]</p></li><li><p>如果指定的列表不可用，则返回ERR_OUT_OF_RANGE</p></li><li>CLEAR_DAQ_LIST清除指定的DAQ列表。对于可配置的DAQ列表，所有ODT表项将被重置为address=0, extension=0和size=0(如果有效:bit_offset = 0xFF)</li><li>预定义的和可配置的DAQ列表，此列表上的运行数据传输将停止，所有的DAQ列表状态被重置</li></ul><h4 id=0xE2-SET-DAQ-PTR><a href=#0xE2-SET-DAQ-PTR class=headerlink title=0xE2:SET_DAQ_PTR></a>0xE2:SET_DAQ_PTR</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xn2azz-2.webp alt=SET_DAQ_PTR></p><ul><li>为WRITE_DAQ或READ_DAQ的后续操作来初始化DAQ列表指针</li><li>如果指定的列表不可用，则返回ERR_OUT_OF_RANGE</li><li>ODT_NUMBER是该DAQ列表中的ODT编号</li><li>ODT_ENTRY_NUMBER是这个ODT中的ODT条目号</li></ul><h4 id=0xE1-WRITE-DAQ><a href=#0xE1-WRITE-DAQ class=headerlink title=0xE1:WRITE_DAQ></a>0xE1:WRITE_DAQ</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xn3oq7-2.webp alt=WRITE_DAQ></p><ul><li>将一个ODT条目写入由DAQ列表指针定义的DAQ列表(参见SET_DAQ_PTR)</li><li>WRITE_DAQ仅适用于可配置DAQ列表中的元素。因此在前面的SET_DAQ_PTR中使用的DAQ_LIST_NUMBER必须在这个范围内[MIN_DAQ MIN_DAQ + 1 . . MAX_DAQ-1]。否则从机将返回一个ERR_WRITE_PROTECTED在WRITE_DAQ的负响应中</li><li>BIT_OFFSET字段允许传输表示的数据刺激元素位的状态（数据掩码，表示传输的数据BIT有效位，如果等于FF，则说明忽略掩）。e.g Bit7 -&gt; BIT_MASK = 0x80 -&gt; BIT_OFFSET = 0x07</li><li>当BIT_OFFSET = FF时，该字段可以忽略。WRITE_DAQ适用于正常值大小用AG表示的数据元素</li><li>如果 BIT_OFFSET 从 0x00 到 0x1F，ODTentry 描述了一个代表位状态的元素。在这种情况下，DAQ的大小元素必须总是等于GRANULARITY_ODT_ENTRY_SIZE_x。如果这个元素= 0，位的值为0。元素&gt;0，则元素的值为1</li><li>ODT条目的大小必须满足粒度和最大值的规则。(ref GET_DAQ_RESOLUTION_INFO)</li><li>DAQ列表指针自动递增到下一个ODT条目</li><li>写入ODT的最后一个ODT条目后，DAQ指针的值为未定义的。主机必须确保正确分配DAQ指针到下一个DAQ列表的下一个ODT</li></ul><h4 id=0xE0-SET-DAQ-LIST-MODE><a href=#0xE0-SET-DAQ-LIST-MODE class=headerlink title=0xE0:SET_DAQ_LIST_MODE></a>0xE0:SET_DAQ_LIST_MODE</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xn52ji-2.webp alt=SET_DAQ_LIST_MODE></p><ul><li>此命令可用于预定义的和可配置的DAQ列表，因此范围DAQ_LIST_NUMBER是[0,1，..MAX_DAQ-1]。如果指定的列表不可用，则返回ERR_OUT_OF_RANGE</li></ul><p>Mode参数：</p><ul><li>DIRECTION=0：DAQ设置为数据采集模式(Slave -&gt; Master)</li><li>DIRECTION=1：STIM设置为数据刺激模式(Master -&gt; Slave)</li><li>TIMESTAMP=1：使能时间戳，反之关闭</li><li>PID_OFF =1：发送DTO不含PID，反之包含PID</li><li>TIMESTAMP标志将DAQ列表设置为时间戳模式</li><li>GET_DAQ_RESOLUTION_INFO中的TIMESTAMP_MODE中的TIMESTAMP_FIXED标志表示Master不能通过SET_DAQ_LIST_MODE关闭时间戳。如果主机仍然尝试这样做，从服务器将使用ERR_CMD_SYNTAX答复</li></ul><p>事件通道号指定有效确定的通用信号源数据传输时序</p><p>为了降低期望的传输速率，可以在DAQ列表上应用传输速率预算器。如果不进行缩减，预分频器的值必须等于1。为减少。预标量必须大于1。预分频器的使用仅用于带有direction = DAQ的DAQ列表</p><p>DAQ列表优先级指定处理该DAQ列表时的优先级。priority = FF优先级最高</p><p>如果ECU不支持DAQ列表优先级，则当DAQ列表优先级&gt; 0，将通过返回ERR_OUT_OF_RANGE表示</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>E0 00 00 00 00 00 01 FF</span><br><span class=line>00：DAQ模式，不使能时间戳，发送DTO时，包含PID</span><br><span class=line>00 00：DAQ标号LIST0</span><br><span class=line>00 00：时间通道号0</span><br><span class=line>01：不分频</span><br><span class=line>FF：优先级最高</span><br></pre></td></tr></table></figure><h4 id=0xDF-GET-DAQ-LIST-MODE><a href=#0xDF-GET-DAQ-LIST-MODE class=headerlink title=0xDF:GET_DAQ_LIST_MODE></a>0xDF:GET_DAQ_LIST_MODE</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xn6dgm-2.webp alt=GET_DAQ_LIST_MODE></p><p>返回指定DAQ列表的当前模式的信息。该命令可以是用于预定义的和可配置的DAQ列表，因此范围为DAQ_LIST_NUMBER是[0,1，..MAX_DAQ-1]。如果指定的列表不可用，则返回ERR_OUT_OF_RANGE</p><p>Mode参数：</p><ul><li>SELECTED=1：已选择DAQ列表。反之未选择DAQ列表</li><li>DIRECTION=0：DAQ数据采集方式已设置</li><li>DIRECTION=1：STIM数据刺激模式已设置</li><li>TIMESTAMP=0：时间戳关闭，反之打开</li><li>PID_OFF = 1：DTO的PID关闭，反之打开</li><li>RUNNING=1：DAQ运行中，反之未运行</li><li>RESUME=1：此DAQ列表是在RESUME模式中使用的配置的一部分</li></ul><p>说明：</p><ul><li>SELECTED标志表示该DAQ列表已被前一个START_STOP_DAQ_LIST(选择)。如果下一个命令是START_STOP_SYNCH，这将启动/停止此DAQ列表。如果下一个命令是SET_REQUEST，这将使DAQ列表成为配置的一部分之后将被清除或存储到非易失性内存中</li><li>DIRECTION标志指示该DAQ列表是否为同步数据配置获得或刺激</li><li>RUNNING标志表示DAQ列表已由主服务器主动启动START_STOP_DAQ_LIST或START_STOP_SYNCH，或者slave在RESUME中mode自动启动DAQ列表。RESUME标志表示此DAQ列表是RESUME中使用的配置的一部分模式</li></ul><h4 id=0xDE-START-STOP-DAQ-LIST><a href=#0xDE-START-STOP-DAQ-LIST class=headerlink title=0xDE:START_STOP_DAQ_LIST></a>0xDE:START_STOP_DAQ_LIST</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xn7vid-2.webp alt=START_STOP_DAQ_LIST></p><p>Mode参数：</p><ul><li>00：停止</li><li>01：启动</li><li>02：选择</li></ul><p>此命令可用于预定义的和可配置的DAQ列表，因此范围DAQ_LIST_NUMBER是[0,1，..MAX_DAQ-1]。如果指定的列表不可用，则返回ERR_OUT_OF_RANGE。 此命令用于启动、停止或准备指定的同步启动DAQ_LIST_NUMBER。mode参数允许启动或停止特定的DAQ列表。选择模式使用提供的参数配置DAQ列表，但不启动指定列表的数据传输。此模式用于同步启动/停止所有配置的DAQ列表(参考START_STOP_SYNCH)或用于RESUME模式(参考SET_REQUEST)。 从设备必须快速在GET_DAQ_LIST_MODE模式中重置SELECTED标志因为START_STOP_SYNCH或SET_REQUEST已被确认。 如果至少有一个DAQ列表已经启动，则从设备处于数据传输模式。GET_STATUS命令将返回DAQ_RUNNING状态</p><ul><li>如果DTO报文的标识字段类型为absolute ODT number，则FIRST_PID为此DAQ列表传输的第一个ODT的DTO包中的绝对ODT号</li><li>任何其他ODT的绝对ODT数可以通过以下方式确定: Absolute_ODT_number(ODT i in DAQ list j) = FIRST_PID(DAQ list j) + relative_ODT_NUMBER(ODT i)</li><li>如果DTO报文标识字段类型为relative ODT number and absolute DAQ list number， FIRST_PID可以忽略</li></ul><h4 id=0xDD-START-STOP-SYNCH><a href=#0xDD-START-STOP-SYNCH class=headerlink title=0xDD:START_STOP_SYNCH></a>0xDD:START_STOP_SYNCH</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xn975x-2.webp alt=START_STOP_SYNCH></p><p>该命令用于同步启停数据的传输采集列表。 所有的DAQ列表或仅到选定的列表(以前配置为START_STOP_DAQ_LIST(选择))。从设备必须重置DAQ表的SELECTED，在成功执行START_STOP_SYNCH后</p><p>Mode参数：</p><ul><li>00：停止所有</li><li>01：启动被选择的</li><li>02：停止被选择的</li></ul><h3 id=可选实现指令-1><a href=#可选实现指令-1 class=headerlink title=可选实现指令></a>可选实现指令</h3><h4 id=0xDC-GET-DAQ-CLOCK><a href=#0xDC-GET-DAQ-CLOCK class=headerlink title=0xDC:GET_DAQ_CLOCK></a>0xDC:GET_DAQ_CLOCK</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xnalqv-2.webp alt=GET_DAQ_CLOCK></p><p>同步空闲的运行数据采集时钟数据采集时钟。这是可选的</p><h4 id=0xDB-READ-DAQ><a href=#0xDB-READ-DAQ class=headerlink title=0xDB:READ_DAQ></a>0xDB:READ_DAQ</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xnbj4k-2.webp alt=READ_DAQ></p><p>读取由DAQ列表指针定义的DAQ列表的一个ODT条目。DAQ表指针在同一个ODT中递增(参见WRITE_DAQ)。 READ_DAQ可以用于预定义的和可配置的DAQ列表中的元素。因此上面SET_DAQ_PTR中使用的DAQ_LIST_NUMBER可以在这个范围内[0,1,…MAX_DAQ-1]</p><blockquote><p>ODT条目的大小必须满足粒度和最大值的规则。(ref GET_DAQ_RESOLUTION_INFO)</p></blockquote><h4 id=0xDA-GET-DAQ-PROCESSOR-INFO><a href=#0xDA-GET-DAQ-PROCESSOR-INFO class=headerlink title=0xDA:GET_DAQ_PROCESSOR_INFO></a>0xDA:GET_DAQ_PROCESSOR_INFO</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xnlf7h-2.webp alt=GET_DAQ_PROCESSOR_INFO></p><p>PROPERTIES参数：</p><ul><li>DAQ_CONFIG_TYPE=0：静态DAQ列表配置</li><li>DAQ_CONFIG_TYPE=1：动态DAQ列表配置</li><li>PRESCALER_SUPPORTED=0：不支持预分频</li><li>PRESCALER_SUPPORTED=1：支持预分频</li><li>RESUME_SUPPORTED=0：DAQ列表不能设置为RESUME模式；(当数据采集列表处于暂停状态时，它将停止对数据的采集。而当将数据采集列表切换到RESUME模式时，它将重新开始对数据的采集)</li><li>RESUME_SUPPORTED=1：DAQ列表能设置为RESUME模式</li><li>BIT_STIM_SUPPORTED=0：不支持按位数据刺激</li><li>BIT_STIM_SUPPORTED=1：支持按位数据刺激</li><li>TIMESTAMP_SUPPORTED=0：不支持时间戳模式</li><li>TIMESTAMP_SUPPORTED=1：支持时间戳模式</li><li>PID_OFF_SUPPORTED=0：标识字段不能关闭</li><li>PID_OFF_SUPPORTED=1：标识字段能关闭</li><li>OVERLOAD_EVENT、OVERLOAD_MSB=00：无过载指示</li><li>OVERLOAD_EVENT、OVERLOAD_MSB=01：PID的MSB过载指示</li><li>OVERLOAD_EVENT、OVERLOAD_MSB=10：事件包的过载指示</li><li><p>OVERLOAD_EVENT、OVERLOAD_MSB=11：不允许出现该状态</p></li><li><p>为指示超限情况，从机可以设置的最大位(MSB)的下一个发送成功的报文的PID。当使用PID的MSB时，ODT的最大数量(绝对或相对)是有限的，并且必须在范围: 0x00&lt;= ODT_NUMBER(DAQ with overrun_msb)&lt;=0x7C</p></li></ul><p>MAX_DAQ：从设备可用的DAQ列表总数，它包括不可配置的预定义DAQ列表(在GET_DAQ_LIST_INFO用PREDEFINE表示)和可配置的DAQ列表；如果DAQ_CONFIG_TYPE=DYNAMIC，则MAX_DAQ=MIN_DAQ+DAQ_COUNT(动态DAQ分配的数量)</p><p>MIN_DAQ：预定义DAQ列表</p><p>MAX_DAQ-MIN_DAQ：可配置的DAQ列表数量</p><p>DAQ_KEY_BYTE参数：</p><p>Type of Optimisation Method：优化类型方法</p><ul><li>Optimisation_Type_3、Optimisation_Type_2、Optimisation_Type_1、Optimisation_Type_0=0000：OM_DEFAULT</li><li>Optimisation_Type_3、Optimisation_Type_2、Optimisation_Type_1、Optimisation_Type_0=0001：OM_ODT_TYPE_16</li><li>Optimisation_Type_3、Optimisation_Type_2、Optimisation_Type_1、Optimisation_Type_0=0010：OM_ODT_TYPE_32</li><li>Optimisation_Type_3、Optimisation_Type_2、Optimisation_Type_1、Optimisation_Type_0=0011：OM_ODT_TYPE_64</li><li>Optimisation_Type_3、Optimisation_Type_2、Optimisation_Type_1、Optimisation_Type_0=0100：OM_ODT_TYPE_ALIGNMENT</li><li>Optimisation_Type_3、Optimisation_Type_2、Optimisation_Type_1、Optimisation_Type_0=0101：OM_MAX_ENTRY_SIZE</li><li>Address_Extension_DAQ、Address_Extension_ODT=00：在同一个ODT中，地址扩展名可以不同</li><li>Address_Extension_DAQ、Address_Extension_ODT=01：一个ODT内的所有条目的地址扩展名必须相同</li><li>Address_Extension_DAQ、Address_Extension_ODT=10：不允许状态</li><li>Address_Extension_DAQ、Address_Extension_ODT=11：一个DAQ内的所有条目的地址扩展必须相同</li><li>Identification_Field_Type_1、Identification_Field_Type_0=00：ODT绝对编号</li><li>Identification_Field_Type_1、Identification_Field_Type_0=01：相对ODT号，绝对DAQ列表号(BYTE)</li><li>Identification_Field_Type_1、Identification_Field_Type_0=10：ODT相对编号，DAQ绝对编号(WORD)</li><li>Identification_Field_Type_1、Identification_Field_Type_0=11：相对ODT编号，绝对DAQ列表编号(WORD，对齐)</li></ul><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>FF 01 00 00 00 06 00 00</span><br><span class=line>01：支持动态DAQ列表配置</span><br><span class=line>00 00：可用DAQ总数为0</span><br><span class=line>00 06：可用事件通道总数为6</span><br><span class=line>00：表示从节点的预定义的DAQ-list数量为0</span><br><span class=line>00：表示在同一个ODT中，地址扩展名可以不同；ODT为绝对编号，无优化</span><br></pre></td></tr></table></figure><h4 id=0xD9-GET-DAQ-RESOLUTION-INFO><a href=#0xD9-GET-DAQ-RESOLUTION-INFO class=headerlink title=0xD9:GET_DAQ_RESOLUTION_INFO></a>0xD9:GET_DAQ_RESOLUTION_INFO</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xnnqw2-2.webp alt=GET_DAQ_RESOLUTION_INFO></p><p>ODT粒度大小（数据对齐方式）：GRANULARITY_ODT_ENTRY_SIZE_x的可能值是{1,2,4,8}。对于ODT条目所描述的元素的地址，必须满足以下要求: Address 取余 GRANULARITY_ODT_ENTRY_SIZE_x = 0；对于ODT条目描述的每个元素大小，必须满足以下要求: SizeOf(element described by ODT entry)取余GRANULARITY_ODT_ENTRY_SIZE_x = 0</p><p>最大ODT条目：MAX_ODT_ENTRY_SIZE_x表示ODT条目描述的元素。对于ODT条目描述的每个元素大小，必须满足以下要求: SizeOf(element described by ODT entry) &lt;= MAX_ODT_ENTRY_SIZE_x</p><p>如果从机不支持时间戳模式(GET_DAQ_PROCESSOR_INFO中没有TIMESTAMP_SUPPORTED)、参数TIMESTAMP_MODE和TIMESTAMP_TICKS无效</p><p>如果从设备支持时间戳模式，则TIMESTAMP_MODE和TIMESTAMP_TICKS包含数据采集时钟的分辨率信息。数据采集时钟是一个自由运行的计数器，永远不会被重置或修改</p><p>TIMESTAMP_MODE参数：</p><ul><li>Size_2、Size_1、Size_0=000：时间戳的大小(字节) = 没有</li><li>Size_2、Size_1、Size_0=001：时间戳的大小(字节) = 1</li><li>Size_2、Size_1、Size_0=010：时间戳的大小(字节) = 2</li><li>Size_2、Size_1、Size_0=011：时间戳的大小(字节) = 不允许</li><li>Size_2、Size_1、Size_0=100：时间戳的大小(字节) = 4</li><li>TIMESTAMP_FIXED标志表示Slave总是发送DTO报文(stamped mode)</li><li>Unit_3、Unit_2、Unit_1、Unit_0=0000： DAQ_TIMESTAMP_UNIT_1NS</li><li>Unit_3、Unit_2、Unit_1、Unit_0=0001： DAQ_TIMESTAMP_UNIT_10NS</li><li>Unit_3、Unit_2、Unit_1、Unit_0=0010： DAQ_TIMESTAMP_UNIT_100NS</li><li>Unit_3、Unit_2、Unit_1、Unit_0=0011： DAQ_TIMESTAMP_UNIT_1US</li><li>Unit_3、Unit_2、Unit_1、Unit_0=0100： DAQ_TIMESTAMP_UNIT_10US</li><li>Unit_3、Unit_2、Unit_1、Unit_0=0101： DAQ_TIMESTAMP_UNIT_100US</li><li>Unit_3、Unit_2、Unit_1、Unit_0=0110： DAQ_TIMESTAMP_UNIT_1MS</li><li>Unit_3、Unit_2、Unit_1、Unit_0=0111： DAQ_TIMESTAMP_UNIT_10MS</li><li>Unit_3、Unit_2、Unit_1、Unit_0=1000： DAQ_TIMESTAMP_UNIT_100MS</li><li>Unit_3、Unit_2、Unit_1、Unit_0=1001： DAQ_TIMESTAMP_UNIT_1S</li></ul><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line>FF 00 18 00 00 00 00 00 </span><br><span class=line>00：ODT_SIZE_DAQ=1</span><br><span class=line>18：ODT_DAQ描述元素的大小上限为24</span><br><span class=line>00：ODT_SIZE_STIM=1</span><br><span class=line>00：ODT_STIM描述元素的大小上限为0</span><br></pre></td></tr></table></figure><h4 id=0xD8-GET-DAQ-LIST-INFO><a href=#0xD8-GET-DAQ-LIST-INFO class=headerlink title=0xD8:GET_DAQ_LIST_INFO></a>0xD8:GET_DAQ_LIST_INFO</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xnp6k9-2.webp alt=GET_DAQ_LIST_INFO></p><p>GET_DAQ_LIST_INFO返回特定DAQ列表的信息。此命令可用于预定义的和可配置的DAQ列表，因此范围DAQ_LIST_NUMBER是[0,1，..MAX_DAQ-1]。如果指定的列表不可用，则返回ERR_OUT_OF_RANGE</p><p>PROPERTIES参数：</p><ul><li>PREDEFINED=0：可更改DAQ列表配置</li><li>PREDEFINED=1：DAQ列表配置固定</li><li>EVENT_FIXED=0：事件通道可以更改</li><li>EVENT_FIXED=1：事件通道配置固定</li><li>STIM、DAQ=00：不允许</li><li>STIM、DAQ=01：DAQ_LIST_TYPE：仅在DIRECTION = DAQ支持</li><li>STIM、DAQ=10：DAQ_LIST_TYPE：仅在DIRECTION = STIM支持</li><li>STIM、DAQ=11：DAQ_LIST_TYPE：在支持两个方向(但不同时)</li></ul><p>如果静态配置DAQ列表，则MAX_ODT指定该DAQ的odt数量和MAX_ODT_ENTRIES表示每个ODT中ODT表项的个数。 FIXED_EVENT表示用于此DAQ列表的固定事件通道的编号</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line>请求 D8 00 00 00 00 00 00 00</span><br><span class=line>响应 FF 04 00 00 00 00 00 00 </span><br><span class=line>STIM、DAQ=01：DAQ_LIST_TYPE：仅在DIRECTION = DAQ支持</span><br><span class=line>EVENT_FIXED=0：事件通道可以更改</span><br><span class=line>PREDEFINED=0：可更改DAQ列表配置</span><br></pre></td></tr></table></figure><h4 id=0xD7-GET-DAQ-EVENT-INFO><a href=#0xD7-GET-DAQ-EVENT-INFO class=headerlink title=0xD7:GET_DAQ_EVENT_INFO></a>0xD7:GET_DAQ_EVENT_INFO</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xnqigr-2.webp alt=GET_DAQ_EVENT_INFO></p><p>GET_DAQ_EVENT_INFO返回特定事件通道的信息的数字。从0到MAX_EVENT_CHANNEL-1指定事件通道。如果指定如果事件通道不可用，则返回ERR_OUT_OF_RANGE</p><p>PROPERTIES参数：</p><ul><li>STIM 、DAQ=00：不允许</li><li>STIM 、DAQ=01：EVENT_CHANNEL_TYPE：仅支持DIRECTION = DAQ列表</li><li>STIM 、DAQ=10：EVENT_CHANNEL_TYPE：仅支持DIRECTION = STIM列表</li><li>STIM 、DAQ=11：EVENT_CHANNEL_TYPE：两种都支持(同时)</li></ul><p>MAX_DAQ_LIST可分配的最大DAQ列表数量事件通道。MAX_DAQ_LIST = 0x00表示此事件可用，但当前为不可用。MAX_DAQ_LIST = 0xFF表示不受限。 该命令会自动将从MTA (Memory Transfer Address)中上传事件通道名称，使用一个或多个UPLOAD命令。事件通道名称length指定名称中的ASCII字节数。不包含结尾\0。 事件通道时间周期指示从设备处理该事件的采样周期事件通道。有关事件通道时间单位的定义，请参阅时间戳单位。 事件通道优先级指定此事件通道的优先级从机处理不同的事件通道。这个优先级是一个固定的属性 ，因此是只读的。事件通道与事件通道priority = FF优先级最高</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>请求 D7 00 00 05 00 00 00 00</span><br><span class=line>响应 FF 04 01 00 00 00 00 00</span><br><span class=line>STIM、DAQ=01：EVENT_CHANNEL_TYPE：仅支持DIRECTION = DAQ列表</span><br></pre></td></tr></table></figure><h3 id=数据采集-DAQ-指令-动态><a href=#数据采集-DAQ-指令-动态 class=headerlink title=数据采集(DAQ)指令(动态)></a>数据采集(DAQ)指令(动态)</h3><h3 id=可选实现指令-2><a href=#可选实现指令-2 class=headerlink title=可选实现指令></a>可选实现指令</h3><h4 id=0xD6-FREE-DAQ><a href=#0xD6-FREE-DAQ class=headerlink title=0xD6:FREE_DAQ></a>0xD6:FREE_DAQ</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xnrxzh-2.webp alt=FREE_DAQ></p><p>该命令清除所有的DAQ列表，并释放所有动态分配的DAQ列表，ODT和ODT条目。在动态DAQ列表配置序列的开始，总主总是首先必须发送一个FREE_DAQ</p><h4 id=0xD5-ALLOC-DAQ><a href=#0xD5-ALLOC-DAQ class=headerlink title=0xD5:ALLOC_DAQ></a>0xD5:ALLOC_DAQ</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xnt3cq-2.webp alt=ALLOC_DAQ></p><ul><li>这个命令为XCP从设备分配了一些DAQ列表。如果没有足够的内存来分配请求的DAQ列表ERR_MEMORY_OVERFLOW将作为负响应返回</li><li>主设备必须按照定义的顺序使用ALLOC_DAQ和FREE_DAQ，ALLOC_ODT和ALLOC_ODT_ENTRY。如果主服务器直接发送ALLOC_DAQ和ALLOC_ODT而没有发送FREE_DAQ，则从服务器返回ERR_SEQUENCE作为消极的回应</li><li>如果主设备直接在ALLOC_ODT_ENTRY之后发送一个ALLOC_DAQ，而没有在之间发送FREE_DAQ，从服务器返回一个ERR_SEQUENCE作为负响应</li></ul><h4 id=0xD4-ALLOC-ODT><a href=#0xD4-ALLOC-ODT class=headerlink title=0xD4:ALLOC_ODT></a>0xD4:ALLOC_ODT</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xnui0j-2.webp alt=ALLOC_ODT></p><ul><li>该命令分配多个ODT，并将它们分配到指定的DAQ列表中。此命令只能用于可配置的DAQ列表，因此DAQ_LIST_NUMBER是[MIN_DAQ, MIN_DAQ+1，..MIN_DAQ+DAQ_COUNT-1]。如果指定的列表不可用，则返回ERR_OUT_OF_RANGE</li><li>如果没有足够的内存来分配请求的odt，ERR_MEMORY_OVERFLOW将作为负响应返回</li></ul><h4 id=0xD3-ALLOC-ODT-ENTRY><a href=#0xD3-ALLOC-ODT-ENTRY class=headerlink title=0xD3:ALLOC_ODT_ENTRY></a>0xD3:ALLOC_ODT_ENTRY</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xnvprc-2.webp alt=ALLOC_ODT_ENTRY></p><ul><li>该命令分配若干ODT表项，并将它们分配给中指定的ODT具体的DAQ名单</li><li>此命令只能用于可配置的DAQ列表，因此DAQ_LIST_NUMBER是[MIN_DAQ, MIN_DAQ+1，..MIN_DAQ+DAQ_COUNT-1]。如果指定的列表不可用，则返回ERR_OUT_OF_RANGE。ODT_NUMBER是该DAQ列表中的相对ODT编号</li><li>如果没有足够的内存来分配请求的ODT项ERR_MEMORY_OVERFLOW将作为负响应返回</li></ul><h3 id=存储器编程-PGM-指令><a href=#存储器编程-PGM-指令 class=headerlink title=存储器编程(PGM)指令></a>存储器编程(PGM)指令</h3><h3 id=必实现指令-4><a href=#必实现指令-4 class=headerlink title=必实现指令></a>必实现指令</h3><h4 id=0xD2-PROGRAM-START><a href=#0xD2-PROGRAM-START class=headerlink title=0xD2:PROGRAM_START></a>0xD2:PROGRAM_START</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xnx8mj-2.webp alt=PROGRAM_START></p><ul><li>此命令用于指示非易失性内存编程的开始序列。如果从设备不处于允许编程的状态将返回ERR_GENERIC</li><li>内存编程命令PROGRAM_CLEAR, PROGRAM, PROGRAM_MAX或PROGRAM_NEXT不允许， 直到成功执行PROGRAM_START命令前</li><li>非volatile内存编程序列的结束由PROGRAM_RESET命令指示</li></ul><p>内存编程序列:</p><p>1.SET_MTA</p><p>2.PROGRAM_CLEAR</p><p>3.PROGRAM</p><p>4.PROGRAM_MAX or PROGRAM_NEXT</p><p>以下命令是可选的(例如验证内存内容): UPLOAD、BUILD_CHECKSUM</p><p>如果非易失性内存编程需要下载额外的代码，下载必须在执行PROGRAM_START命令之前完成。MTA必须指向已下载例程的入口点</p><p>COMM_MODE参数：</p><ul><li>MASTER_BLOCK_MODE：标志表示主机块模式是否可用</li><li>INTERLEAVED_MODE：标志表示在此期间交错模式是否可用</li><li>SLAVE_BLOCK_MODE：标志表示从机块模式在此期间是否可用</li></ul><p>通信参数MAX_CTO、MAX_BS、MIN_ST和QUEUE_SIZE可能会被修改当从设备处于内存编程模式时。 新的通信参数为MAX_CTO_PGM、MAX_BS_PGM、MIN_ST_PGM和QUEUE_SIZE_PGM在回应中返回</p><h4 id=0xD1-PROGRAM-CLEAR><a href=#0xD1-PROGRAM-CLEAR class=headerlink title=0xD1:PROGRAM_CLEAR></a>0xD1:PROGRAM_CLEAR</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xo7fw4-2.webp alt=PROGRAM_CLEAR></p><p>该命令用于在重编程之前清除一部分非易失性内存</p><p>Mode参数：</p><ul><li>0x00：绝对访问模式(默认)</li><li>0x01：功能访问模式</li></ul><p>绝对访问模式(Absolute Access mode):</p><ul><li>MTA指向从机内部内存扇区的开始。内存扇区在ASAM MCD 2MC从设备中描述文件</li><li>如果需要按一定的顺序清除多个内存扇区，则主设备必须使用新的MTA重复PROGRAM_CLEAR服务。在这种情况下，必须保留Clear提供的扇区序列号</li><li>Clear Range表示需要清除的内存部分的长度。PROGRAM_CLEAR服务一次清除一个完整的扇区或多个扇区</li></ul><p>功能访问模式(Functional Access mode):</p><ul><li><p>MTA功能模式没有影响</p></li><li><p>0x00000001：清除所有校准数据区域</p></li><li>0x00000002：清除所有的代码区(引导区不被覆盖)</li><li>0x00000004：清除NVRAM区域(s)</li><li>0x00000008-0x00000080：保留</li><li>0x00000100-0xFFFFFF00：用户自定义</li></ul><h4 id=0xD0-PROGRAM><a href=#0xD0-PROGRAM class=headerlink title=0xD0:PROGRAM></a>0xD0:PROGRAM</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xo8qvd-2.webp alt=PROGRAM></p><ul><li>如果ADDRESS_GRANULYRITY = DWORD，必须使用2个对齐字节才能满足需求</li><li>元素是BYTE、WORD或DWORD，取决于AG</li><li>该命令用于对从机内部的数据进行编程。取决于访问模式(由PROGRAM_FORMAT定义)支持2个不同的概念</li><li>当数据元素的数量为0时，表示内存段的结束</li><li>整个编程序列的结束由PROGRAM_RESET表示。从设备将进入断开连接状态。通常是硬件复位 从设备执行。此命令可能支持块传输，类似命令DOWNLOAD和DOWNLOAD_NEXT</li></ul><p>绝对访问模式：</p><ul><li>CTO中包含的指定长度(大小)的数据块将被编程非易失性存储器，从MTA开始。MTA将会增加这个数据字节</li><li>如果需要对多个内存扇区进行编程，则主设备必须保持在IF_DATA描述中给出的信息称为的编程序列号</li></ul><p>功能访问方式：</p><ul><li>CTO中包含的指定长度(大小)的数据块将被编程非易失性内存。ECU软件知道新flash内容的起始地址，这取决于PROGRAM_CLEAR命令。ECU期待新的flash内容在一个数据流和分配是由ECU自动完成</li></ul><h4 id=0xCF-PROGRAM-RESET><a href=#0xCF-PROGRAM-RESET class=headerlink title=0xCF:PROGRAM_RESET></a>0xCF:PROGRAM_RESET</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xoa4ru-2.webp alt=PROGRAM_RESET></p><p>此可选命令指示非易失性内存编程序列的结束。它可能会有反应，也可能不会。不管是哪种情况，从设备都会转到断开连接的状态。此命令可用于强制从设备复位</p><h3 id=可选实现指令-3><a href=#可选实现指令-3 class=headerlink title=可选实现指令></a>可选实现指令</h3><h4 id=0xCE-GET-PGM-PROCESSOR-INFO><a href=#0xCE-GET-PGM-PROCESSOR-INFO class=headerlink title=0xCE:GET_PGM_PROCESSOR_INFO></a>0xCE:GET_PGM_PROCESSOR_INFO</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xobo9v-2.webp alt=GET_PGM_PROCESSOR_INFO></p><p>PROPERTIES参数：</p><ul><li>FUNCTIONAL_MODE、ABSOLUTE_MODE=00：清除编程模式 -&gt; 不允许</li><li>FUNCTIONAL_MODE、ABSOLUTE_MODE=01：清除编程模式 -&gt; 只支持绝对模式</li><li><p>FUNCTIONAL_MODE、ABSOLUTE_MODE=10：清除编程模式 -&gt; 仅支持功能模式</p></li><li><p>FUNCTIONAL_MODE、ABSOLUTE_MODE=11：清除编程模式 -&gt; 都支持</p></li><li>COMPRESSION_REQUIRED、COMPRESSION_SUPPORTED=00：压缩 -&gt; 不支持</li><li>COMPRESSION_REQUIRED、COMPRESSION_SUPPORTED=01：压缩 -&gt; 支持</li><li>!COMPRESSION_REQUIRED、COMPRESSION_SUPPORTED=10：压缩 -&gt; 支持、可请求</li><li>COMPRESSION_REQUIRED、COMPRESSION_SUPPORTED=11：压缩 -&gt; 支持、可请求</li><li>ENCRYPTION_REQUIRED、ENCRYPTION_SUPPORTED=00：编码 -&gt; 不支持</li><li>ENCRYPTION_REQUIRED、ENCRYPTION_SUPPORTED=01：编码 -&gt; 支持</li><li>ENCRYPTION_REQUIRED、ENCRYPTION_SUPPORTED=10：编码 -&gt; 支持、可请求</li><li>ENCRYPTION_REQUIRED、ENCRYPTION_SUPPORTED=11：编码 -&gt; 支持、可请求</li><li>NON_SEQ_PGM_REQUIRED、NON_SEQ_PGM_SUPPORTED=00：不连续编程 -&gt; 不支持</li><li>NON_SEQ_PGM_REQUIRED、NON_SEQ_PGM_SUPPORTED=01：不连续编程 -&gt; 支持</li><li>NON_SEQ_PGM_REQUIRED、NON_SEQ_PGM_SUPPORTED=10：不连续编程 -&gt; 支持、可请求</li><li>NON_SEQ_PGM_REQUIRED、NON_SEQ_PGM_SUPPORTED=11：不连续编程 -&gt; 支持、可请求</li></ul><h4 id=0xCD-GET-SECTOR-INFO><a href=#0xCD-GET-SECTOR-INFO class=headerlink title=0xCD:GET_SECTOR_INFO></a>0xCD:GET_SECTOR_INFO</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xod5tr-2.webp alt=GET_SECTOR_INFO></p><p>GET_SECTOR_INFO返回特定扇区的信息。如果指定的扇区不可用，则返回ERR_OUT_OF_RANGE。此可选命令仅对编程方法“绝对访问模式”有帮助</p><h4 id=0xCC-PROGRAM-PREPARE><a href=#0xCC-PROGRAM-PREPARE class=headerlink title=0xCC:PROGRAM_PREPARE></a>0xCC:PROGRAM_PREPARE</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xoe3lm-2.webp alt=PROGRAM_PREPARE></p><p>此可选命令用于先决条件的代码下载到非易失性内存开始前。MTA指向易失性存储器的开始存储代码的位置。参数Codesize指定将被下载的代码大小。下载是使用后续标准完成的命令，如SET_MTA和DOWNLOAD。 代码大小根据AG以BYTE、WORD或DWORD表示。从设备必须确保目标内存区域是可用的，并且它在允许下载代码的操作状态。如果不是，则ERR_GENERIC将返回</p><h4 id=0xCB-PROGRAM-FORMAT><a href=#0xCB-PROGRAM-FORMAT class=headerlink title=0xCB:PROGRAM_FORMAT></a>0xCB:PROGRAM_FORMAT</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xofg48-2.webp alt=PROGRAM_FORMAT></p><p>Compression参数：</p><ul><li><p>0x00：数据未压缩(默认)</p></li><li><p>0x80-0xFF：用户定义</p></li></ul><p>Encryption参数：</p><ul><li>0x00：数据未编码(默认)</li><li>0x80-0xFF：用户定义</li></ul><p>Programming参数：</p><ul><li>0x00：顺序编程(默认)</li><li>0x80-0xFF：用户定义</li></ul><p>Access参数：</p><ul><li>0x00：绝对访问模式(默认) MTA使用物理地址</li><li>0x01：功能访问方式 MTA的功能是一个新flash内容文件的序列号</li><li>0x80-0xFF：用户定义</li></ul><p>受该指令影响的指令：PROGRAM, PROGRAM_MAX, PROGRAM_NEXT, SET_MTA</p><p>Example： … SET_MTA PROGRAM_FORMAT PROGRAM PROGRAM_NEXT1..n …</p><h4 id=0xCA-PROGRAM-NEXT><a href=#0xCA-PROGRAM-NEXT class=headerlink title=0xCA:PROGRAM_NEXT></a>0xCA:PROGRAM_NEXT</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xogns6-2.webp alt=PROGRAM_NEXT></p><blockquote><p>如果AG = DWORD，则必须使用2个对齐字节以满足对齐要求。 ELEMENT是BYTE, WORD或DWORD，取决于AG。 该命令用于为PROGRAM命令传输连续的数据字节块传输模式</p></blockquote><p>如果数据元素的数量与期望值不匹配，则错误码将返回code ERR_SEQUENCE。回应将包含预期的数据元素数量</p><h4 id=0xC9-PROGRAM-MAX><a href=#0xC9-PROGRAM-MAX class=headerlink title=0xC9:PROGRAM_MAX></a>0xC9:PROGRAM_MAX</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xoija6-2.webp alt=PROGRAM_MAX></p><blockquote><p>根据AG的不同，必须使用1或3个对齐字节来满足对齐要求。 ELEMENT是BYTE, WORD或DWORD，取决于AG。 CTO中包含的MAX_CTO-1元素长度固定的数据块为编程到非易失性存储器中，从MTA开始。MTA将进行后增量MAX_CTO-1。 此命令不支持块传输，也不能在块传输中使用序列</p></blockquote><h4 id=0xC8-PROGRAM-VERIFY><a href=#0xC8-PROGRAM-VERIFY class=headerlink title=0xC8:PROGRAM_VERIFY></a>0xC8:PROGRAM_VERIFY</h4><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2023/12/25/xost15-2.webp alt=PROGRAM_VERIFY></p><p>使用Mode = 00，主机可以请求从机启动内部测试例程来检查新的flash内容是否验算等于flash的其余部分。 使用Mode = 01，主机可以告诉从机，发送给从机一个验证值</p><p>Verification Type参数：</p><ul><li>0x0001：calibration area(s) of the flash</li><li>0x0002：code area(s) of the flash</li><li>0x0004：complete flash content</li><li>0x0008-0x0080：保留</li><li>0x0100-0xFF00：用户定义</li></ul></article><div class=post-copyright><div class=post-copyright__title><span class=post-copyright-info><h>XCP协议指令</h></span></div><div class=post-copyright__type><span class=post-copyright-info><a href=http://blog.myan.run/posts/1283829227/ >http://blog.myan.run/posts/1283829227/</a></span></div><div class=post-copyright-m><div class=post-copyright-m-info><div class=post-copyright-a><h>作者</h><div class=post-copyright-cc-info><h>MYAN</h></div></div><div class=post-copyright-c><h>发布于</h><div class=post-copyright-cc-info><h>2023-12-25</h></div></div><div class=post-copyright-u><h>更新于</h><div class=post-copyright-cc-info><h>2025-10-27</h></div></div><div class=post-copyright-c><h>许可协议</h><div class=post-copyright-cc-info><a class=icon rel=noopener target=_blank title="Creative Commons" href=https://creativecommons.org/ ><i class="fab fa-creative-commons"></i></a><a rel=noopener target=_blank title="CC BY-NC-SA 4.0" href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a></div></div></div></div></div><div class=tag_share><div class=post-meta__tag-list><a class=post-meta__tags href=/tags/XCP%E6%A0%87%E5%AE%9A%E5%8D%8F%E8%AE%AE/ >XCP标定协议</a></div><div class=post_share><div class=social-share data-image=https://imgs.myan.run/i/2023/01/02/nc5zdb-2.webp data-sites=facebook,twitter,wechat,weibo,qq></div><link rel=stylesheet href=https://npm.elemecdn.com/butterfly-extsrc/sharejs/dist/css/share.min.css media=print onload='this.media="all"'><script src=https://npm.elemecdn.com/butterfly-extsrc/sharejs/dist/js/social-share.min.js defer></script></div></div><nav class=pagination-post id=pagination><div class="prev-post pull-left"><a href=/posts/1635299896/ ><img class=prev-cover src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2022/07/31/dtfxex.webp onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class=pagination-info><div class=label>上一篇</div><div class=prev_info>XCP协议基础</div></div></a></div><div class="next-post pull-right"><a href=/posts/1898197937/ ><img class=next-cover src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2022/07/31/dtfxex.webp onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class=pagination-info><div class=label>下一篇</div><div class=next_info>嵌入式基础(二)</div></div></a></div></nav><div class=relatedPosts><div class=headline><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class=relatedPosts-list><div><a href=/posts/1635299896/ title=XCP协议基础><img class=cover src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2022/07/31/dtfxex.webp alt=cover><div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i>2023-12-25</div><div class=title>XCP协议基础</div></div></a></div></div></div><hr><div id=post-comment><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i><span>评论</span></div></div><div class=comment-wrap><div><div id=twikoo-wrap></div></div></div></div></div><div class=aside-content id=aside-content><div class="card-widget card-info"><div class=is-center><div class=avatar-img><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://imgs.myan.run/i/2022/07/31/dvpwnk.webp onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt=avatar></div><div class=author-info__name>MYAN</div><div class=author-info__description>一个喜欢编程爱折腾的小盆友</div></div><div class="card-info-data site-data is-center"><a href=/archives/ ><div class=headline>文章</div><div class=length-num>25</div></a><a href=/tags/ ><div class=headline>标签</div><div class=length-num>11</div></a><a href=/categories/ ><div class=headline>分类</div><div class=length-num>9</div></a></div><a id=card-info-btn target=_blank rel=noopener href=https://github.com/MYAN1998><i class="fab fa-github"></i><span>Welcome</span></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href=https://github.com/MYAN1998 target=_blank title=GitHub><svg class="social_icon faa-tada" aria-hidden=true><use xlink:href=#icon-github></use></svg></a><a class="social-icon faa-parent animated-hover" href=mailto:zhouenpei980523@gmail.com target=_blank title=Email><svg class="social_icon faa-tada" aria-hidden=true><use xlink:href=#icon-youxiang></use></svg></a><a class="social-icon faa-parent animated-hover" href=https://space.bilibili.com/418199514 target=_blank title=BiliBili><svg class="social_icon faa-tada" aria-hidden=true><use xlink:href=#icon-bilibili></use></svg></a><a class="social-icon faa-parent animated-hover" href="tencent://Message/?Uin=1455316479&amp;amp;websiteName=local.edu.com:8888=&amp;amp;Menu=yes" target=_blank title=QQ><svg class="social_icon faa-tada" aria-hidden=true><use xlink:href=#icon-QQ></use></svg></a></div></div><div class="card-widget card-announcement"><div class=item-headline><svg class="faa-tada icon" style=height:25px;width:25px;fill:currentColor;position:relative;top:5px aria-hidden=true><use xlink:href=#icon-gonggao></use></svg><span>公告</span></div><div class=announcement_content><center><b>--- 主域名 ---<br><a target=_blank rel=noopener href=https://www.myan.run title=此线路部署于Vercel class=anno_content><font color=#5ea6e5>myan.run</font></a>&nbsp;<br>--- 备用域名 ---<br><a href=https://blog.myan.run/ title=此线路部署于服务器 class=anno_content><font color=#5ea6e5>blog.myan.run</font></a><br></b><div id=welcome-info><b><b><center>⚡ 欢迎信息 ⚡</center>欢迎来到MYAN的频道</b></b></div></center></div></div><div class=sticky_layout><div class=card-widget id=card-toc><div class=item-headline><svg style=width:22px;height:22px;position:relative;top:5px><use xlink:href=#icon-service-directory></use></svg><span>目录</span><span class=toc-percentage></span></div><div class=toc-content><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#XCP%E6%8C%87%E4%BB%A4%E8%AF%A6%E8%A7%A3><span class=toc-number>1.</span><span class=toc-text>XCP指令详解</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A0%87%E5%87%86-STD-%E6%8C%87%E4%BB%A4><span class=toc-number>1.1.</span><span class=toc-text>标准(STD)指令</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%BF%85%E5%AE%9E%E7%8E%B0%E6%8C%87%E4%BB%A4><span class=toc-number>1.2.</span><span class=toc-text>必实现指令</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#0xFF-CONNECT><span class=toc-number>1.2.1.</span><span class=toc-text>0xFF:CONNECT</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0XFE-DISCONNECT><span class=toc-number>1.2.2.</span><span class=toc-text>0XFE:DISCONNECT</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#OXFD-GET-STATUS><span class=toc-number>1.2.3.</span><span class=toc-text>OXFD:GET_STATUS</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xFC-SYNCH><span class=toc-number>1.2.4.</span><span class=toc-text>0xFC:SYNCH</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%8F%AF%E9%80%89%E6%8C%87%E4%BB%A4><span class=toc-number>1.3.</span><span class=toc-text>可选指令</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#0XFB-GET-COMM-MODE-INFO><span class=toc-number>1.3.1.</span><span class=toc-text>0XFB:GET_COMM_MODE_INFO</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xFA-GET-ID><span class=toc-number>1.3.2.</span><span class=toc-text>0xFA:GET_ID</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0XF9-SET-REQUEST><span class=toc-number>1.3.3.</span><span class=toc-text>0XF9:SET_REQUEST</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xF8-GET-SEED><span class=toc-number>1.3.4.</span><span class=toc-text>0xF8:GET_SEED</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0XF7-UNLOCK><span class=toc-number>1.3.5.</span><span class=toc-text>0XF7:UNLOCK</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xF6-SET-MTA><span class=toc-number>1.3.6.</span><span class=toc-text>0xF6:SET_MTA</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xF5-UPLOAD><span class=toc-number>1.3.7.</span><span class=toc-text>0xF5:UPLOAD</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xF4-SHORT-UPLOAD><span class=toc-number>1.3.8.</span><span class=toc-text>0xF4:SHORT_UPLOAD</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xF3-BUILD-CHECKSUM><span class=toc-number>1.3.9.</span><span class=toc-text>0xF3:BUILD_CHECKSUM</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xF2-TRANSPORT-LAYER-CMD><span class=toc-number>1.3.10.</span><span class=toc-text>0xF2:TRANSPORT_LAYER_CMD</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xF1-USER-CMD><span class=toc-number>1.3.11.</span><span class=toc-text>0xF1:USER_CMD</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A0%87%E5%AE%9A-CAL-%E6%8C%87%E4%BB%A4><span class=toc-number>1.4.</span><span class=toc-text>标定(CAL)指令</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%BF%85%E5%AE%9E%E7%8E%B0%E6%8C%87%E4%BB%A4-1><span class=toc-number>1.5.</span><span class=toc-text>必实现指令</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#0xF0-DOWNLOAD><span class=toc-number>1.5.1.</span><span class=toc-text>0xF0:DOWNLOAD</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%8F%AF%E9%80%89%E5%AE%9E%E7%8E%B0%E6%8C%87%E4%BB%A4><span class=toc-number>1.6.</span><span class=toc-text>可选实现指令</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#0xEF-DOWNLOAD-NEXT><span class=toc-number>1.6.1.</span><span class=toc-text>0xEF:DOWNLOAD_NEXT</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xEE-DOWNLOAD-MAX><span class=toc-number>1.6.2.</span><span class=toc-text>0xEE:DOWNLOAD_MAX</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xED-SHORT-DOWNLOAD><span class=toc-number>1.6.3.</span><span class=toc-text>0xED:SHORT_DOWNLOAD</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xEC-MODIFY-BITS><span class=toc-number>1.6.4.</span><span class=toc-text>0xEC:MODIFY_BITS</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%A1%B5%E9%9D%A2%E5%88%87%E6%8D%A2-PAG-%E6%8C%87%E4%BB%A4><span class=toc-number>1.7.</span><span class=toc-text>页面切换(PAG)指令</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%BF%85%E5%AE%9E%E7%8E%B0%E6%8C%87%E4%BB%A4-2><span class=toc-number>1.8.</span><span class=toc-text>必实现指令</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#0xEB-SET-CAL-PAGE><span class=toc-number>1.8.1.</span><span class=toc-text>0xEB:SET_CAL_PAGE</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xEA-GET-CAL-PAGE><span class=toc-number>1.8.2.</span><span class=toc-text>0xEA:GET_CAL_PAGE</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%8F%AF%E9%80%89%E5%AE%9E%E7%8E%B0%E5%91%BD%E4%BB%A4><span class=toc-number>1.9.</span><span class=toc-text>可选实现命令</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#0xE9-GET-PAG-PROCESSOR-INFO><span class=toc-number>1.9.1.</span><span class=toc-text>0xE9:GET_PAG_PROCESSOR_INFO</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xE8-GET-SEGMENT-INFO><span class=toc-number>1.9.2.</span><span class=toc-text>0xE8:GET_SEGMENT_INFO</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xE7-GET-PAGE-INFO><span class=toc-number>1.9.3.</span><span class=toc-text>0xE7:GET_PAGE_INFO</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xE6-SET-SEGMENT-MODE><span class=toc-number>1.9.4.</span><span class=toc-text>0xE6:SET_SEGMENT_MODE</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xE5-GET-SEGMENT-MODE><span class=toc-number>1.9.5.</span><span class=toc-text>0xE5:GET_SEGMENT_MODE</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xE4-COPY-CAL-PAGE><span class=toc-number>1.9.6.</span><span class=toc-text>0xE4:COPY_CAL_PAGE</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86-DAQ-%E6%8C%87%E4%BB%A4-%E9%9D%99%E6%80%81><span class=toc-number>1.10.</span><span class=toc-text>数据采集(DAQ)指令(静态)</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%BF%85%E5%AE%9E%E7%8E%B0%E6%8C%87%E4%BB%A4-3><span class=toc-number>1.11.</span><span class=toc-text>必实现指令</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#0xE3-CLEAR-DAQ-LIST><span class=toc-number>1.11.1.</span><span class=toc-text>0xE3:CLEAR_DAQ_LIST</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xE2-SET-DAQ-PTR><span class=toc-number>1.11.2.</span><span class=toc-text>0xE2:SET_DAQ_PTR</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xE1-WRITE-DAQ><span class=toc-number>1.11.3.</span><span class=toc-text>0xE1:WRITE_DAQ</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xE0-SET-DAQ-LIST-MODE><span class=toc-number>1.11.4.</span><span class=toc-text>0xE0:SET_DAQ_LIST_MODE</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xDF-GET-DAQ-LIST-MODE><span class=toc-number>1.11.5.</span><span class=toc-text>0xDF:GET_DAQ_LIST_MODE</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xDE-START-STOP-DAQ-LIST><span class=toc-number>1.11.6.</span><span class=toc-text>0xDE:START_STOP_DAQ_LIST</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xDD-START-STOP-SYNCH><span class=toc-number>1.11.7.</span><span class=toc-text>0xDD:START_STOP_SYNCH</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%8F%AF%E9%80%89%E5%AE%9E%E7%8E%B0%E6%8C%87%E4%BB%A4-1><span class=toc-number>1.12.</span><span class=toc-text>可选实现指令</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#0xDC-GET-DAQ-CLOCK><span class=toc-number>1.12.1.</span><span class=toc-text>0xDC:GET_DAQ_CLOCK</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xDB-READ-DAQ><span class=toc-number>1.12.2.</span><span class=toc-text>0xDB:READ_DAQ</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xDA-GET-DAQ-PROCESSOR-INFO><span class=toc-number>1.12.3.</span><span class=toc-text>0xDA:GET_DAQ_PROCESSOR_INFO</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xD9-GET-DAQ-RESOLUTION-INFO><span class=toc-number>1.12.4.</span><span class=toc-text>0xD9:GET_DAQ_RESOLUTION_INFO</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xD8-GET-DAQ-LIST-INFO><span class=toc-number>1.12.5.</span><span class=toc-text>0xD8:GET_DAQ_LIST_INFO</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xD7-GET-DAQ-EVENT-INFO><span class=toc-number>1.12.6.</span><span class=toc-text>0xD7:GET_DAQ_EVENT_INFO</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86-DAQ-%E6%8C%87%E4%BB%A4-%E5%8A%A8%E6%80%81><span class=toc-number>1.13.</span><span class=toc-text>数据采集(DAQ)指令(动态)</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%8F%AF%E9%80%89%E5%AE%9E%E7%8E%B0%E6%8C%87%E4%BB%A4-2><span class=toc-number>1.14.</span><span class=toc-text>可选实现指令</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#0xD6-FREE-DAQ><span class=toc-number>1.14.1.</span><span class=toc-text>0xD6:FREE_DAQ</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xD5-ALLOC-DAQ><span class=toc-number>1.14.2.</span><span class=toc-text>0xD5:ALLOC_DAQ</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xD4-ALLOC-ODT><span class=toc-number>1.14.3.</span><span class=toc-text>0xD4:ALLOC_ODT</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xD3-ALLOC-ODT-ENTRY><span class=toc-number>1.14.4.</span><span class=toc-text>0xD3:ALLOC_ODT_ENTRY</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AD%98%E5%82%A8%E5%99%A8%E7%BC%96%E7%A8%8B-PGM-%E6%8C%87%E4%BB%A4><span class=toc-number>1.15.</span><span class=toc-text>存储器编程(PGM)指令</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%BF%85%E5%AE%9E%E7%8E%B0%E6%8C%87%E4%BB%A4-4><span class=toc-number>1.16.</span><span class=toc-text>必实现指令</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#0xD2-PROGRAM-START><span class=toc-number>1.16.1.</span><span class=toc-text>0xD2:PROGRAM_START</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xD1-PROGRAM-CLEAR><span class=toc-number>1.16.2.</span><span class=toc-text>0xD1:PROGRAM_CLEAR</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xD0-PROGRAM><span class=toc-number>1.16.3.</span><span class=toc-text>0xD0:PROGRAM</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xCF-PROGRAM-RESET><span class=toc-number>1.16.4.</span><span class=toc-text>0xCF:PROGRAM_RESET</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%8F%AF%E9%80%89%E5%AE%9E%E7%8E%B0%E6%8C%87%E4%BB%A4-3><span class=toc-number>1.17.</span><span class=toc-text>可选实现指令</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#0xCE-GET-PGM-PROCESSOR-INFO><span class=toc-number>1.17.1.</span><span class=toc-text>0xCE:GET_PGM_PROCESSOR_INFO</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xCD-GET-SECTOR-INFO><span class=toc-number>1.17.2.</span><span class=toc-text>0xCD:GET_SECTOR_INFO</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xCC-PROGRAM-PREPARE><span class=toc-number>1.17.3.</span><span class=toc-text>0xCC:PROGRAM_PREPARE</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xCB-PROGRAM-FORMAT><span class=toc-number>1.17.4.</span><span class=toc-text>0xCB:PROGRAM_FORMAT</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xCA-PROGRAM-NEXT><span class=toc-number>1.17.5.</span><span class=toc-text>0xCA:PROGRAM_NEXT</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xC9-PROGRAM-MAX><span class=toc-number>1.17.6.</span><span class=toc-text>0xC9:PROGRAM_MAX</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#0xC8-PROGRAM-VERIFY><span class=toc-number>1.17.7.</span><span class=toc-text>0xC8:PROGRAM_VERIFY</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id=footer><div id=footer-wrap><div class=copyright>&copy;2020 - 2025 By MYAN</div><div class=footer_custom_text><div>⚡过去已去，未来以来⚡</div><a target=_blank href=https://hexo.io/ ><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title=博客框架为Hexo></a>&nbsp;<a target=_blank href=https://butterfly.js.org/ ><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title=主题采用butterfly></a>&nbsp;<a target=_blank href=https://beian.miit.gov.cn><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.shields.io/badge/ICP%E5%A4%87%E6%A1%88-%E8%8B%8FICP%E5%A4%8720012291%E5%8F%B7--3-brightgreen title=ICP备案号></a>&nbsp;<a target=_blank href=https://github.com/ ><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.shields.io/badge/Source-GitHub-yellowgreen title=本站项目由Gtihub托管></a>&nbsp;<a target=_blank href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.shields.io/badge/CDN-%E5%8F%88%E6%8B%8D%E4%BA%91-orange title=本站项目由又拍云提供加速服务></a>&nbsp;<a target=_blank href=https://vercel.com/ ><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.shields.io/badge/Hosted-Vercel-green title=本站采用多线程部署，主线托管于Vercel></a>&nbsp;<a target=_blank href=https://www.51.la/ ><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.shields.io/badge/Analytics-51la-blue title=本站数据分析得益于51la技术支持></a>&nbsp;</div></div></footer></div><div id=rightside><div id=rightside-config-hide><button id=readmode type=button title=阅读模式><i class="fas fa-book-open"></i></button><button id=translateLink type=button title=简繁转换>繁</button><button id=hide-aside-btn type=button title=单栏和双栏切换><i class="fas fa-arrows-alt-h"></i></button><button class=share type=button title=右键模式 onclick=changeMouseMode()><i class="fas fa-mouse"></i></button></div><div id=rightside-config-show><button id=rightside_config type=button title=设置><i class="fas fa-cog fa-spin"></i></button><button class=close id=mobile-toc-button type=button title=目录><i class="fas fa-list-ul"></i></button><a id=to_comment href=#post-comment title=直达评论><i class="fas fa-comments"></i></a><button id=go-up type=button title=回到顶部><i class="fas fa-arrow-up"></i></button></div></div><div id=local-search><div class=search-dialog><nav class=search-nav><span class=search-dialog-title>搜索</span><span id=loading-status></span><button class=search-close-button><i class="fas fa-times"></i></button></nav><div class=is-center id=loading-database><i class="fas fa-spinner fa-pulse"></i><span>数据库加载中</span></div><div class=search-wrap><div id=local-search-input><div class=local-search-box><input class=local-search-box--input placeholder=搜索文章></div></div><hr><div id=local-search-results></div></div></div><div id=search-mask></div></div><div class=js-pjax id=rightMenu><div class="rightMenu-group rightMenu-small"><a class=rightMenu-item href=javascript:window.history.back();><i class="fa fa-arrow-left"></i></a><a class=rightMenu-item href=javascript:window.history.forward();><i class="fa fa-arrow-right"></i></a><a class=rightMenu-item href=javascript:window.location.reload();><i class="fa fa-refresh"></i></a><a class=rightMenu-item href=javascript:rmf.scrollToTop();><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id=menu-text><a class=rightMenu-item href=javascript:rmf.copySelect();><i class="fa fa-copy"></i><span>复制</span></a><a class=rightMenu-item href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>百度搜索</span></a></div><div class="rightMenu-group rightMenu-line hide" id=menu-too><a class=rightMenu-item href=javascript:window.open(window.getSelection().toString());window.location.reload();><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id=menu-paste><a class=rightMenu-item href=javascript:rmf.paste()><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id=menu-post><a class=rightMenu-item href=#post-comment><i class="fas fa-comment"></i><span>空降评论</span></a><a class=rightMenu-item href=javascript:rmf.copyWordsLink()><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id=menu-to><a class=rightMenu-item href=javascript:rmf.openWithNewTab()><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class=rightMenu-item id=menu-too href=javascript:rmf.open()><i class="fa fa-link"></i><span>转到链接</span></a><a class=rightMenu-item href=javascript:rmf.copyLink()><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id=menu-img><a class=rightMenu-item href=javascript:rmf.saveAs()><i class="fa fa-download"></i><span>保存图片</span></a><a class=rightMenu-item href=javascript:rmf.openWithNewTab()><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class=rightMenu-item href=javascript:rmf.copyLink()><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class=rightMenu-item href=/random/index.html><i class="fa fa-paper-plane"></i><span>随便逛逛</span></a><a class=rightMenu-item href=javascript:rmf.switchReadMode();><i class="fa fa-book"></i><span>阅读模式</span></a><a class=rightMenu-item href=/about/ ><i class="fa fa-info-circle"></i><span>关于博客</span></a><a class=rightMenu-item href=javascript:rmf.fullScreen();><i class="fas fa-expand"></i><span>切换全屏</span></a><a class=rightMenu-item href=javascript:window.print();><i class="fa-solid fa-print"></i><span>打印页面</span></a></div></div><div><script src=/js/utils.js></script><script src=/js/main.js></script><script src=/js/tw_cn.js></script><script src=https://npm.elemecdn.com/@fancyapps/ui/dist/fancybox.umd.js></script><script src=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js></script><script src=/js/search/local-search.js></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class=js-pjax><script>(()=>{const t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://discuss.myan.run/",region:"",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))},o=()=>{"object"!=typeof twikoo?getScript("/%3Cscript%20src=%22https:/cdn.jsdelivr.net/npm/twikoo@1.6.39/dist/twikoo.all.min.js%22%3E%3C/script%3E").then(t):setTimeout(t,0)};btf.loadComment(document.getElementById("twikoo-wrap"),o)})()</script></div><script>window.addEventListener("load",(()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++){t+="<div class='aside-list-item'>";{const a="data-lazy-src";t+=`<a href='${e[n].url}' class='thumbnail'><img ${a}='${e[n].avatar}' alt='${e[n].nick}'></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}' title='${e[n].content}'>${e[n].content}</a>\n        <div class='name'><span>${e[n].nick} / </span><time datetime="${e[n].date}">${btf.diffDate(e[n].date,!0)}</time></div>\n        </div></div>`}else t+="没有评论";let n=document.querySelector("#card-newest-comments .aside-list");n.innerHTML=t,window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("twikoo-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{twikoo.getRecentComments({envId:"https://discuss.myan.run/",region:"",pageSize:3,includeReply:!0}).then((function(t){const n=t.map((e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()};var t}));saveToLocal.set("twikoo-newest-comments",JSON.stringify(n),10/1440),e(n)})).catch((function(e){document.querySelector("#card-newest-comments .aside-list").innerHTML="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof twikoo?t():getScript("/%3Cscript%20src=%22https:/cdn.jsdelivr.net/npm/twikoo@1.6.39/dist/twikoo.all.min.js%22%3E%3C/script%3E").then(t)})()}};t(),document.addEventListener("pjax:complete",t)}))</script><script async src=//npm.elemecdn.com/pace-js@1.2.4/pace.min.js></script><script defer src=https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js></script><script defer data-pjax src=/js/rightMenu.js></script><script async src=/js/title.js></script><script async data-pjax src=/js/custom.js></script><script async data-pjax src=/js/waterfall.js></script><script async src=/js/console.js></script><script async src=/js/fps.js></script><script async src=/js/f12.js></script><script src=https://cdn.jsdelivr.net/gh/nextapps-de/winbox/dist/winbox.bundle.min.js></script><script async src=https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js></script><script async src=https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js></script><script src=/js/meihua.js></script><script src=https://npm.elemecdn.com/butterfly-extsrc/dist/activate-power-mode.min.js></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!0,document.body.addEventListener("input",POWERMODE)</script><script id=click-heart src=https://npm.elemecdn.com/butterfly-extsrc/dist/click-heart.min.js async mobile=true></script><link rel=stylesheet href=https://npm.elemecdn.com/aplayer/dist/APlayer.min.css media=print onload='this.media="all"'><script src=https://npm.elemecdn.com/aplayer/dist/APlayer.min.js></script><script src=https://npm.elemecdn.com/butterfly-extsrc/metingjs/dist/Meting.min.js></script><script src=https://lib.baomitu.com/pjax/0.2.8/pjax.min.js></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><div class=app-refresh id=app-refresh style="position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease"><div class=app-refresh-wrap style=display:flex;color:#fff;height:100%;align-items:center;justify-content:center><label>✨ 有新文章啦！ 👉</label><a href=javascript:void(0) onclick=location.reload()><span style=color:#fff;text-decoration:underline;cursor:pointer>🍗点击食用🍔</span></a></div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"✨ 有新文章啦！ 👉",backgroundColor:t,duration:5e5,pos:e,actionText:"🍗点击食用🍔",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#3b70fc":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",(function(){showNotification()})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js")})))</script><script async data-pjax src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script></div><script data-pjax>function butterfly_categories_card_injector_config(){var a=document.getElementById("recent-posts");console.log("已挂载butterfly_categories_card"),a.insertAdjacentHTML("afterbegin",'<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://imgs.myan.run/i/2022/07/31/dtfxex.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/年终总结/&quot;);" href="javascript:void(0);">年终总结</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://imgs.myan.run/i/2022/07/31/dvkxed.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/汽车电子/&quot;);" href="javascript:void(0);">汽车电子</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://imgs.myan.run/i/2022/07/31/dumk61.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/HEXO/&quot;);" href="javascript:void(0);">HEXO</a><span class="categoryBar-list-count">7</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://imgs.myan.run/i/2022/07/31/dtfxex.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Python/&quot;);" href="javascript:void(0);">Python</a><span class="categoryBar-list-count">5</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://imgs.myan.run/i/2022/07/31/dvkxed.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/iOS/&quot;);" href="javascript:void(0);">iOS</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://imgs.myan.run/i/2022/07/31/dumk61.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/生活/&quot;);" href="javascript:void(0);">生活</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://imgs.myan.run/i/2022/07/31/dumk61.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/电脑/&quot;);" href="javascript:void(0);">电脑</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://imgs.myan.run/i/2022/07/31/dvkxed.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/课程/&quot;);" href="javascript:void(0);">课程</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(undefined);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/嵌入式/&quot;);" href="javascript:void(0);">嵌入式</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr"></span></li></ul></div></div>')}document.getElementById("recent-posts")&&"/"===location.pathname&&butterfly_categories_card_injector_config()</script><script data-pjax>function butterfly_swiper_injector_config(){var i=document.getElementById("recent-posts");console.log("已挂载butterfly_swiper"),i.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/278973011/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgs.myan.run/i/2023/01/02/nc5zdb-2.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-07-26</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/278973011/&quot;);" href="javascript:void(0);" alt="">高数课程&amp;竞赛书籍推荐</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/278973011/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/310975005/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgs.myan.run/i/2022/07/31/dtfxex.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-12-19</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/310975005/&quot;);" href="javascript:void(0);" alt="">我和我的小伙伴超</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/310975005/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer src=https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js></script><script defer data-pjax src=https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js></script><div class=js-pjax><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","2s"),arr[i].setAttribute("data-wow-delay","1s"),arr[i].setAttribute("data-wow-offset","100"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src=https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow.min.js></script><script defer src=https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow_init.js></script><script async src=/js/iconfont.js></script></body></html>